{"version":3,"file":"metaScore.Editor.umd.min.442.js","mappings":"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","sources":["webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/app.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/components.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/keyboard.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/links.js","webpack://metaScore/./node_modules/@blockly/block-plus-minus/src/serialization_helper.js","webpack://metaScore/./node_modules/@blockly/block-plus-minus/src/field_minus.js","webpack://metaScore/./node_modules/@blockly/block-plus-minus/src/field_plus.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/media.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/reactivity.js"],"sourcesContent":["import { defineBlocksWithJsonArray } from \"blockly/core\";\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"app_startup\",\n    message0: \"%{BKY_APP_STARTUP}\",\n    message1: \"%{BKY_APP_STARTUP_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_APP_STARTUP_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_STARTUP_HELPURL}\",\n  },\n  {\n    type: \"app_enter_fullscreen\",\n    message0: \"%{BKY_APP_ENTER_FULLSCREEN}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_ENTER_FULLSCREEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_ENTER_FULLSCREEN_HELPURL}\",\n  },\n  {\n    type: \"app_exit_fullscreen\",\n    message0: \"%{BKY_APP_EXIT_FULLSCREEN}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_EXIT_FULLSCREEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_EXIT_FULLSCREEN_HELPURL}\",\n  },\n  {\n    type: \"app_toggle_fullscreen\",\n    message0: \"%{BKY_APP_TOGGLE_FULLSCREEN}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_TOGGLE_FULLSCREEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_TOGGLE_FULLSCREEN_HELPURL}\",\n  },\n  {\n    type: \"app_get_idle_time\",\n    message0: \"%{BKY_APP_GET_IDLE_TIME}\",\n    output: \"Number\",\n    style: \"app_blocks\",\n    tooltip: \"%{BKY_APP_GET_IDLE_TIME_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_GET_IDLE_TIME_HELPURL}\",\n  },\n  {\n    type: \"app_reset\",\n    message0: \"%{BKY_APP_RESET}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_RESET_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_RESET_HELPURL}\",\n  },\n]);\n","import { ref, unref, watchEffect } from \"vue\";\nimport { defineBlocksWithJsonArray, Extensions, Msg, Css } from \"blockly/core\";\nimport FieldDropdown from \"../core/field_dropdown\";\nimport { useModule } from \"@core/services/module-manager\";\nimport { EMPTY_OPTION } from \"../constants\";\n\nconst BREADCRUMB_SEPARATOR = \" › \";\n\nconst SUPPORTED_PROPERTIES = [\n  \"background-color\",\n  \"border-color\",\n  \"border-width\",\n  \"hidden\",\n  \"loop-duration\",\n  \"reversed\",\n  \"cursor-width\",\n  \"cursor-color\",\n];\n\n/**\n * Get component dropdown options\n * @param {array} components The components\n * @param {boolean} recursive Whether to recurse to child components.\n * @param {string} breadcrumb_ The current recursion breadcrumb, used internally.\n * @returns {array} An options array\n */\nfunction getComponentOptions(\n  components = [],\n  recursive = false,\n  breadcrumb_ = \"\"\n) {\n  const {\n    activeScenario,\n    getComponentChildren,\n    getComponentLabel,\n    getComponentIconURL,\n  } = useModule(\"app_components\");\n  let options = [];\n\n  if (components.length > 0) {\n    components.forEach((c) => {\n      const name = getComponentLabel(c);\n      let label = name;\n\n      const icon_url = getComponentIconURL(c);\n      if (icon_url) {\n        label = document.createElement(\"div\");\n        label.classList.add(\"blocklyMenuItemLabel\");\n\n        const icon = document.createElement(\"img\");\n        icon.src = icon_url;\n        icon.classList.add(\"blocklyMenuItemLabelIcon\");\n        label.appendChild(icon);\n\n        const text = document.createElement(\"div\");\n        text.classList.add(\"blocklyMenuItemLabelText\");\n        text.appendChild(document.createTextNode(name));\n        label.appendChild(text);\n\n        if (breadcrumb_) {\n          const breadcrumb_text = `${breadcrumb_}${name}`;\n          const breadcrumb = document.createElement(\"div\");\n          breadcrumb.classList.add(\"blocklyMenuItemLabelBreadcrumb\");\n          breadcrumb.appendChild(document.createTextNode(breadcrumb_text));\n          label.appendChild(breadcrumb);\n          label.setAttribute(\"title\", breadcrumb_text);\n        } else {\n          label.setAttribute(\"title\", name);\n        }\n      }\n\n      let children = null;\n      if (recursive) {\n        const sub_components = getComponentChildren(c);\n        if ([\"Scenario\", \"Page\"].includes(c.type)) {\n          sub_components.reverse();\n        }\n\n        children = getComponentOptions(\n          sub_components,\n          true,\n          `${breadcrumb_}${name}${BREADCRUMB_SEPARATOR}`\n        );\n      }\n\n      const option = [\n        {\n          label,\n          text: name,\n          children,\n          expanded: c.type === \"Scenario\" && c.id === unref(activeScenario),\n        },\n        `${c.type}:${c.id}`,\n      ];\n\n      options.push(option);\n    });\n  }\n\n  return options;\n}\n\n/**\n * Get the options array for the PROPERTY field.\n * @param {string} component_type The component type.\n * @returns {array} The options.\n */\nfunction getPropertyOptions(component_type) {\n  if (component_type === EMPTY_OPTION) {\n    return [\n      [Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION],\n      // Add all supported properties\n      // to prevent validation issues.\n      ...SUPPORTED_PROPERTIES.map((property) => {\n        return [Msg.COMPONENTS_PROPERTY[property], property];\n      }),\n    ];\n  }\n\n  const { getModelByType } = useModule(\"app_components\");\n  return Object.keys(getModelByType(component_type).properties)\n    .filter((property) => {\n      return SUPPORTED_PROPERTIES.includes(property);\n    })\n    .map((property) => {\n      return [Msg.COMPONENTS_PROPERTY[property], property];\n    });\n}\n\nconst scenarioOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  scenarioOptions.value = getComponentOptions(getComponentsByType(\"Scenario\"));\n});\nExtensions.register(\"components_scenario_options\", function () {\n  const scenario_input = this.getInput(\"COMPONENT\");\n  if (!scenario_input) return;\n\n  const scenario_field = new FieldDropdown(\n    function () {\n      const options = scenarioOptions.value;\n\n      if (options.length === 0) {\n        const block = this.getSourceBlock();\n        if (block) {\n          block.setEnabled(false);\n          block.setTooltip(Msg.COMPONENTS_NO_SCENARIO_TOOLTIP);\n        }\n        this.setEnabled(false);\n        return [[Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION]];\n      }\n\n      return options;\n    },\n    null,\n    { searchable: true }\n  );\n  scenario_input.appendField(scenario_field, \"COMPONENT\");\n});\n\nconst blockOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  blockOptions.value = getComponentOptions(getComponentsByType(\"Block\"));\n});\nExtensions.register(\"components_block_options\", function () {\n  const block_input = this.getInput(\"COMPONENT\");\n  if (!block_input) return;\n\n  const block_field = new FieldDropdown(\n    function () {\n      const options = blockOptions.value;\n\n      if (options.length === 0) {\n        const block = this.getSourceBlock();\n        if (block) {\n          block.setEnabled(false);\n          block.setTooltip(Msg.COMPONENTS_NO_BLOCK_TOOLTIP);\n        }\n        this.setEnabled(false);\n        return [[Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION]];\n      }\n\n      return options;\n    },\n    null,\n    { searchable: true }\n  );\n  block_input.appendField(block_field, \"COMPONENT\");\n});\n\nconst componentOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  componentOptions.value = getComponentOptions(\n    getComponentsByType(\"Scenario\"),\n    true\n  );\n});\nExtensions.register(\"components_component_options\", function () {\n  const component_input = this.getInput(\"COMPONENT\");\n  if (!component_input) return;\n\n  const mock = this.type.endsWith(\"_mock\");\n\n  const component_field = new FieldDropdown(\n    function () {\n      const empty_option = [\n        {\n          label: Msg.COMPONENTS_EMPTY_OPTION,\n          default: true,\n          hidden: true,\n        },\n        EMPTY_OPTION,\n      ];\n\n      if (mock) return [empty_option];\n\n      return [empty_option, ...componentOptions.value];\n    },\n    null,\n    { searchable: true }\n  );\n  component_input.appendField(component_field, \"COMPONENT\");\n\n  if (mock) {\n    component_field.setEnabled(false);\n\n    this.setEnabled(false);\n    this.setTooltip(() => {\n      return Msg.COMPONENTS_PROPERTY_MOCK_TOOLTIP.replace(\n        \"%2\",\n        Msg.COMPONENTS_PROPERTY[this.property_]\n      );\n    });\n  }\n});\n\nExtensions.register(\"components_property_options\", function () {\n  const property_input = this.getInput(\"PROPERTY\");\n  if (!property_input) return;\n\n  const mock = this.type.endsWith(\"_mock\");\n\n  const property_field = new FieldDropdown(function () {\n    const block = this.getSourceBlock();\n\n    if (!block || mock) {\n      if (block && block.property_) {\n        return [[Msg.COMPONENTS_PROPERTY[block.property_], block.property_]];\n      }\n      return [[Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION]];\n    }\n\n    const component_value = block.getFieldValue(\"COMPONENT\");\n    const component_type = block.getComponentType_(component_value);\n    return getPropertyOptions(component_type);\n  });\n  property_input.appendField(property_field, \"PROPERTY\");\n\n  if (mock) {\n    property_field.setEnabled(false);\n  }\n});\n\nconst PROPERTY_OPTIONS_MUTATOR_MIXIN = {\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{elseIfCount: (number|undefined), haseElse: (boolean|undefined)}}\n   *     The state of this block.\n   */\n  saveExtraState: function () {\n    const property_input = this.getInput(\"PROPERTY\");\n    if (property_input) {\n      return {\n        property: this.getFieldValue(\"PROPERTY\"),\n      };\n    }\n\n    return null;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block.\n   */\n  loadExtraState: function (state) {\n    const property_input = this.getInput(\"PROPERTY\");\n    if (property_input) {\n      this.property_ = state[\"property\"];\n    }\n  },\n\n  /**\n   * Callback called whenever the block's parent workspace changes.\n   * @param {object} evt The event.\n   */\n  onchange: function (evt) {\n    switch (evt.type) {\n      case \"create\":\n        this.updatePropertyField_();\n        break;\n\n      case \"change\":\n        if (evt.element === \"field\") {\n          if (evt.name === \"COMPONENT\") {\n            const newType = this.getComponentType_(evt.newValue);\n            const oldType = this.getComponentType_(evt.oldValue);\n\n            // Type didn't change, skip update.\n            if (newType === oldType) return;\n\n            this.updatePropertyField_();\n          } else if (evt.name === \"PROPERTY\") {\n            this.property_ = evt.newValue;\n            this.updateChecks_();\n          }\n        }\n        break;\n    }\n  },\n\n  /**\n   * Parse the component type from a COMPONENT field value.\n   * @param {string?} component_value The value to parse, the current field value is used if null.\n   * @returns {string?} The component id or null if the value counldn't be parsed.\n   */\n  getComponentType_: function (component_value) {\n    if (typeof component_value === \"undefined\") {\n      component_value = this.getFieldValue(\"COMPONENT\");\n    }\n\n    if (!component_value) return null;\n\n    const [type] = component_value.split(\":\");\n    return type;\n  },\n\n  /**\n   * Get the compatible value type or list of value types for the VALUE input.\n   * @param {string} component_type The component type.\n   * @param {string} property_name The property's name.\n   * @returns {string|array<string>|null} The type check.\n   */\n  getPropertyValueTypeCheck_: function (component_type, property_name) {\n    if (component_type === EMPTY_OPTION) return null;\n\n    const { getModelByType } = useModule(\"app_components\");\n    const property = getModelByType(component_type).properties?.[property_name];\n\n    if (property) {\n      const format = property.format;\n      switch (format) {\n        case \"color\":\n          return \"Colour\";\n      }\n\n      const type = Array.isArray(property.type)\n        ? property.type.find((t) => t !== \"null\")\n        : property.type;\n\n      switch (type) {\n        case \"boolean\":\n          return \"Boolean\";\n        case \"number\":\n        case \"integer\":\n          return \"Number\";\n        case \"string\":\n          return \"String\";\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   * Update the PROPERTY field.\n   */\n  updatePropertyField_: function () {\n    const property_field = this.getField(\"PROPERTY\");\n    if (!property_field) return;\n\n    const options = property_field.getOptions(false);\n    const match = options.find((o) => {\n      return o[1] === this.property_;\n    });\n    property_field.setValue(match ? this.property_ : options[0][1]);\n  },\n\n  /**\n   * Update the output or VALUE field's check.\n   */\n  updateChecks_() {\n    const mock = this.type.endsWith(\"_mock\");\n    if (mock) return;\n\n    const component_type = this.getComponentType_();\n    const property_value = this.getFieldValue(\"PROPERTY\");\n    const type = this.getPropertyValueTypeCheck_(\n      component_type,\n      property_value\n    );\n\n    const value_input = this.getInput(\"VALUE\");\n    if (value_input) {\n      value_input.setCheck(type);\n    } else if (this.outputConnection) {\n      this.outputConnection.setCheck(type);\n    }\n  },\n};\n\nExtensions.registerMutator(\n  \"components_property_options_mutator\",\n  PROPERTY_OPTIONS_MUTATOR_MIXIN\n);\n\ndefineBlocksWithJsonArray([\n  // Click.\n  {\n    type: \"components_click\",\n    message0: \"%{BKY_COMPONENTS_CLICK}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n    ],\n    message1: \"%{BKY_COMPONENTS_CLICK_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    extensions: [\"components_component_options\"],\n    inputsInline: true,\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_CLICK_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_CLICK_HELPURL}\",\n  },\n  // Set scenario.\n  {\n    type: \"components_set_scenario\",\n    message0: \"%{BKY_COMPONENTS_SET_SCENARIO}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n    ],\n    extensions: [\"components_scenario_options\"],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_SCENARIO_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_SCENARIO_HELPURL}\",\n  },\n  // Get property.\n  {\n    type: \"components_get_property\",\n    message0: \"%{BKY_COMPONENTS_GET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    output: null,\n    style: \"component_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_GET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_GET_PROPERTY_HELPURL}\",\n  },\n  // Get property mock.\n  {\n    type: \"components_get_property_mock\",\n    message0: \"%{BKY_COMPONENTS_GET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    output: null,\n    style: \"component_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_GET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_GET_PROPERTY_HELPURL}\",\n  },\n  // Set property.\n  {\n    type: \"components_set_property\",\n    message0: \"%{BKY_COMPONENTS_SET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n      {\n        type: \"input_value\",\n        name: \"VALUE\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_PROPERTY_HELPURL}\",\n  },\n  // Set property mock.\n  {\n    type: \"components_set_property_mock\",\n    message0: \"%{BKY_COMPONENTS_SET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n      {\n        type: \"input_value\",\n        name: \"VALUE\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_PROPERTY_HELPURL}\",\n  },\n  // Get block's activate page index.\n  {\n    type: \"components_get_block_page\",\n    message0: \"%{BKY_COMPONENTS_GET_BLOCK_PAGE}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n    ],\n    extensions: [\"components_block_options\"],\n    output: \"Number\",\n    style: \"component_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_GET_BLOCK_PAGE_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_GET_BLOCK_PAGE_HELPURL}\",\n  },\n  // Set block's activate page index.\n  {\n    type: \"components_set_block_page\",\n    message0: \"%{BKY_COMPONENTS_SET_BLOCK_PAGE}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_value\",\n        name: \"INDEX\",\n        check: \"Number\",\n      },\n    ],\n    extensions: [\"components_block_options\"],\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_BLOCK_PAGE_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_BLOCK_PAGE_HELPURL}\",\n  },\n]);\n\nCss.register(\n  `\n  .blocklyDropDownDiv .blocklyMenuItemLabel {\n    display: grid;\n    grid-template-columns: auto 1fr;\n    grid-template-rows: auto auto;\n    grid-template-areas:\n      \"icon label\"\n      \"breadcrumb breadcrumb\";\n    align-items: center;\n    padding-left: calc(var(--level, 0) * 0.5em);\n    gap: 0 0.5em;\n  }\n  .blocklyDropDownDiv .blocklyMenuItemLabelIcon {\n    grid-area: icon;\n    width: 1.5em;\n  }\n  .blocklyDropDownDiv .blocklyMenuItemLabelText {\n    grid-area: label;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .blocklyDropDownDiv .blocklyMenuItemLabelBreadcrumb {\n    display: block;\n    grid-area: breadcrumb;\n    font-size: 0.75em;\n    opacity: 0.5;\n    min-width: 0;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .blocklyDropDownDiv .blocklyMenu:not(.blocklyMenuSearching) .blocklyMenuItemLabelBreadcrumb {\n    display: none;\n  }\n  `\n);\n","import { defineBlocksWithJsonArray } from \"blockly/core\";\n\nconst keys = [\n  [\"%{BKY_KEYBOARD_KEYPRESSED_ANY}\", \"any\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_SPACE}\", \" \"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_UP}\", \"ArrowUp\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_DOWN}\", \"ArrowDown\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_RIGHT}\", \"ArrowRight\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_LEFT}\", \"ArrowLeft\"],\n  [\"a\", \"a\"],\n  [\"b\", \"b\"],\n  [\"c\", \"c\"],\n  [\"d\", \"d\"],\n  [\"e\", \"e\"],\n  [\"f\", \"f\"],\n  [\"g\", \"g\"],\n  [\"h\", \"h\"],\n  [\"i\", \"i\"],\n  [\"j\", \"j\"],\n  [\"k\", \"k\"],\n  [\"l\", \"l\"],\n  [\"m\", \"m\"],\n  [\"n\", \"n\"],\n  [\"o\", \"o\"],\n  [\"p\", \"p\"],\n  [\"q\", \"q\"],\n  [\"r\", \"r\"],\n  [\"s\", \"s\"],\n  [\"t\", \"t\"],\n  [\"u\", \"u\"],\n  [\"v\", \"v\"],\n  [\"w\", \"w\"],\n  [\"x\", \"x\"],\n  [\"y\", \"y\"],\n  [\"z\", \"z\"],\n  [\"0\", \"0\"],\n  [\"1\", \"1\"],\n  [\"2\", \"2\"],\n  [\"3\", \"3\"],\n  [\"4\", \"4\"],\n  [\"5\", \"5\"],\n  [\"6\", \"6\"],\n  [\"7\", \"7\"],\n  [\"8\", \"8\"],\n  [\"9\", \"9\"],\n];\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"keyboard_keypressed\",\n    message0: \"%{BKY_KEYBOARD_KEYPRESSED}\",\n    args0: [\n      {\n        type: \"field_dropdown\",\n        name: \"KEY\",\n        options: keys,\n      },\n    ],\n    message1: \"%{BKY_KEYBOARD_KEYPRESSED_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_KEYBOARD_KEYPRESSED_TOOLTIP}\",\n    helpUrl: \"%{BKY_KEYBOARD_KEYPRESSED_HELPURL}\",\n  },\n]);\n","import { ref, watchEffect } from \"vue\";\nimport { defineBlocksWithJsonArray, Extensions, Msg } from \"blockly/core\";\nimport { useModule } from \"@core/services/module-manager\";\nimport { EMPTY_OPTION } from \"../constants\";\n\nconst triggerOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  const components = getComponentsByType(\"Content\");\n  const parser = new DOMParser();\n  const ids = new Set();\n\n  components.forEach((component) => {\n    const text = component.text;\n\n    if (text && text.includes(\"data-behavior-trigger\")) {\n      const doc = parser.parseFromString(text, \"text/html\");\n      doc.querySelectorAll(\"a[data-behavior-trigger]\").forEach((el) => {\n        const id = el.dataset.behaviorTrigger;\n        ids.add(id);\n      });\n    }\n  });\n\n  if (ids.size === 0) {\n    triggerOptions.value = [[Msg.LINKS_EMPTY_OPTION, EMPTY_OPTION]];\n  } else {\n    triggerOptions.value = Array.from(ids)\n      .sort()\n      .map((id) => [id, id]);\n  }\n});\n\nExtensions.register(\"behavior_triggers_options\", function () {\n  const block = this;\n  const field = block.getField(\"TRIGGER\");\n  const options = field.getOptions();\n\n  if (options.length === 1 && options[0][1] === EMPTY_OPTION) {\n    field.setEnabled(false);\n    block.setEnabled(false);\n    block.setTooltip(Msg.LINKS_CLICK_EMPTY_TOOLTIP);\n  } else {\n    field.setEnabled(true);\n    block.setEnabled(true);\n    block.setTooltip(Msg.LINKS_CLICK_TOOLTIP);\n  }\n});\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"links_click\",\n    message0: \"%{BKY_LINKS_CLICK}\",\n    args0: [\n      {\n        type: \"field_dropdown\",\n        name: \"TRIGGER\",\n        options: () => triggerOptions.value,\n      },\n    ],\n    message1: \"%{BKY_LINKS_CLICK_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    extensions: [\"behavior_triggers_options\"],\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_LINKS_CLICK_TOOLTIP}\",\n    helpUrl: \"%{BKY_LINKS_CLICK_HELPURL}\",\n  },\n  {\n    type: \"links_open_url\",\n    message0: \"%{BKY_LINKS_OPEN_URL}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"URL\",\n        check: \"String\",\n      },\n    ],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    helpUrl: \"%{BKY_LINKS_OPEN_URL_HELPURL}\",\n  },\n]);\n","/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Returns the extra state of the given block (either as XML or a JSO, depending\n * on the block's definition).\n * @param {!Blockly.BlockSvg} block The block to get the extra state of.\n * @returns {string} A stringified version of the extra state of the given\n *     block.\n */\nexport function getExtraBlockState(block) {\n  // TODO: This is a dupe of the BlockChange.getExtraBlockState code, do we\n  //    want to make that public?\n  if (block.saveExtraState) {\n    const state = block.saveExtraState();\n    return state ? JSON.stringify(state) : '';\n  } else if (block.mutationToDom) {\n    const state = block.mutationToDom();\n    return state ? Blockly.Xml.domToText(state) : '';\n  }\n  return '';\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A function that creates a minus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\nimport {getExtraBlockState} from './serialization_helper';\n\n/**\n * Creates a minus image field used for mutation.\n * @param {Object=} args Untyped args passed to block.minus when the field\n *     is clicked.\n * @returns {Blockly.FieldImage} The minus field.\n */\nexport function createMinusField(args = undefined) {\n  const minus = new Blockly.FieldImage(minusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.minus when the field is clicked.\n   * @type {?(Object|undefined)}\n   * @private\n   */\n  minus.args_ = args;\n  return minus;\n}\n\n/**\n * Calls block.minus(args) when the minus field is clicked.\n * @param {Blockly.FieldImage} minusField The field being clicked.\n * @private\n */\nfunction onClick_(minusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = minusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n  const oldExtraState = getExtraBlockState(block);\n  block.minus(minusField.args_);\n  const newExtraState = getExtraBlockState(block);\n\n  if (oldExtraState != newExtraState) {\n    Blockly.Events.fire(\n      new Blockly.Events.BlockChange(\n        block,\n        'mutation',\n        null,\n        oldExtraState,\n        newExtraState,\n      ),\n    );\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst minusImage =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw' +\n  'MC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPS' +\n  'JNMTggMTFoLTEyYy0xLjEwNCAwLTIgLjg5Ni0yIDJzLjg5NiAyIDIgMmgxMmMxLjEwNCAw' +\n  'IDItLjg5NiAyLTJzLS44OTYtMi0yLTJ6IiBmaWxsPSJ3aGl0ZSIgLz48L3N2Zz4K';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A field for a plus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\nimport {getExtraBlockState} from './serialization_helper';\n\n/**\n * Creates a plus image field used for mutation.\n * @param {Object=} args Untyped args passed to block.minus when the field\n *     is clicked.\n * @returns {Blockly.FieldImage} The Plus field.\n */\nexport function createPlusField(args = undefined) {\n  const plus = new Blockly.FieldImage(plusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.plus when the field is clicked.\n   * @type {?(Object|undefined)}\n   * @private\n   */\n  plus.args_ = args;\n  return plus;\n}\n\n/**\n * Calls block.plus(args) when the plus field is clicked.\n * @param {!Blockly.FieldImage} plusField The field being clicked.\n * @private\n */\nfunction onClick_(plusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = plusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n  const oldExtraState = getExtraBlockState(block);\n  block.plus(plusField.args_);\n  const newExtraState = getExtraBlockState(block);\n\n  if (oldExtraState != newExtraState) {\n    Blockly.Events.fire(\n      new Blockly.Events.BlockChange(\n        block,\n        'mutation',\n        null,\n        oldExtraState,\n        newExtraState,\n      ),\n    );\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst plusImage =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n  '9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMT' +\n  'ggMTBoLTR2LTRjMC0xLjEwNC0uODk2LTItMi0ycy0yIC44OTYtMiAybC4wNzEgNGgtNC4wNz' +\n  'FjLTEuMTA0IDAtMiAuODk2LTIgMnMuODk2IDIgMiAybDQuMDcxLS4wNzEtLjA3MSA0LjA3MW' +\n  'MwIDEuMTA0Ljg5NiAyIDIgMnMyLS44OTYgMi0ydi00LjA3MWw0IC4wNzFjMS4xMDQgMCAyLS' +\n  '44OTYgMi0ycy0uODk2LTItMi0yeiIgZmlsbD0id2hpdGUiIC8+PC9zdmc+Cg==';\n","import {\n  defineBlocksWithJsonArray,\n  Extensions,\n  Msg,\n  FieldCheckbox,\n  FieldLabel,\n} from \"blockly/core\";\nimport { createMinusField } from \"@blockly/block-plus-minus/src/field_minus\";\nimport { createPlusField } from \"@blockly/block-plus-minus/src/field_plus\";\n\ndefineBlocksWithJsonArray([\n  // Block for timecode value\n  {\n    type: \"media_timecode\",\n    message0: \"%1\",\n    args0: [\n      {\n        type: \"field_timecode\",\n        name: \"TIMECODE\",\n      },\n    ],\n    output: \"Number\",\n    style: \"media_blocks\",\n    helpUrl: \"%{BKY_MEDIA_TIMECODE_HELPURL}\",\n    tooltip: \"%{BKY_MEDIA_TIMECODE_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"],\n  },\n  {\n    type: \"media_get_duration\",\n    message0: \"%{BKY_MEDIA_GET_DURATION}\",\n    output: \"Number\",\n    style: \"media_blocks\",\n    tooltip: \"%{BKY_MEDIA_GET_DURATION_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_GET_DURATION_HELPURL}\",\n  },\n  {\n    type: \"media_get_time\",\n    message0: \"%{BKY_MEDIA_GET_TIME}\",\n    output: \"Number\",\n    style: \"media_blocks\",\n    tooltip: \"%{BKY_MEDIA_GET_TIME_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_GET_TIME_HELPURL}\",\n  },\n  {\n    type: \"media_set_time\",\n    message0: \"%{BKY_MEDIA_SET_TIME}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: \"Number\",\n      },\n    ],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_SET_TIME_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_SET_TIME_HELPURL}\",\n  },\n  {\n    type: \"media_playing\",\n    message0: \"%{BKY_MEDIA_PLAYING}\",\n    output: \"Boolean\",\n    style: \"media_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAYING_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAYING_HELPURL}\",\n  },\n  {\n    type: \"media_play\",\n    message0: \"%{BKY_MEDIA_PLAY}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAY_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAY_HELPURL}\",\n  },\n  {\n    type: \"media_play_excerpt\",\n    message0: \"%{BKY_MEDIA_PLAY_EXCERPT}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"PLUS_MINUS\",\n      },\n      {\n        type: \"input_value\",\n        name: \"FROM\",\n        check: \"Number\",\n      },\n      {\n        type: \"input_value\",\n        name: \"TO\",\n        check: \"Number\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"LINK_HIGHLIGHT\",\n      },\n    ],\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    mutator: \"media_play_excerpt_mutator\",\n    tooltip: \"%{BKY_MEDIA_PLAY_EXCERPT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAY_EXCERPT_HELPURL}\",\n  },\n  // Block representing the top block in the media_play_excerpt mutator.\n  {\n    type: \"media_play_excerpt_top\",\n    message0: \"%{BKY_MEDIA_PLAY_EXCERPT}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"FROM\",\n        check: \"Number\",\n      },\n      {\n        type: \"input_value\",\n        name: \"TO\",\n        check: \"Number\",\n      },\n    ],\n    inputsInline: true,\n    nextStatement: null,\n    enableContextMenu: false,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAY_EXCERPT_TOP_TOOLTIP}\",\n  },\n  // Block representing the then statement in the media_play_excerpt mutator.\n  {\n    type: \"media_play_excerpt_then\",\n    message0: \"%{BKY_MEDIA_PLAY_EXCERPT_THEN}\",\n    previousStatement: null,\n    enableContextMenu: false,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAY_EXCERPT_THEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAY_EXCERPT_THEN_HELPURL}\",\n  },\n  {\n    type: \"media_pause\",\n    message0: \"%{BKY_MEDIA_PAUSE}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PAUSE_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PAUSE_HELPURL}\",\n  },\n  {\n    type: \"media_stop\",\n    message0: \"%{BKY_MEDIA_STOP}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_STOP_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_STOP_HELPURL}\",\n  },\n]);\n\n/**\n * Mutator methods added to media_play_excerpt block.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst MEDIA_PLAY_EXCERPT_MUTATOR_MIXIN = {\n  hasThen_: false,\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{hasThen: (boolean|undefined)}}\n   *     The state of this block.\n   */\n  saveExtraState: function () {\n    if (!this.hasLinkHighlight_ && !this.hasThen_) {\n      return null;\n    }\n\n    const data = {};\n    if (this.hasLinkHighlight_) {\n      data.hasLinkHighlight = true;\n    }\n    if (this.hasThen_) {\n      data.hasThen = true;\n    }\n    return data;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block.\n   */\n  loadExtraState: function (state) {\n    this.hasLinkHighlight_ = state[\"hasLinkHighlight\"] || false;\n    this.hasThen_ = state[\"hasThen\"] || false;\n    this.updateShape_();\n  },\n\n  /**\n   * Callback for the plus field.\n   */\n  plus: function () {\n    this.hasThen_ = true;\n    this.updateShape_();\n  },\n\n  /**\n   * Callback for the minus field.\n   * @this {Blockly.Block}\n   */\n  minus: function () {\n    this.hasThen_ = false;\n    this.updateShape_();\n  },\n\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @this {Block}\n   * @private\n   */\n  updateShape_: function () {\n    const input = this.getInput(\"LINK_HIGHLIGHT\");\n\n    if (this.hasLinkHighlight_) {\n      if (!this.getField(\"HIGHLIGHT_LINK\")) {\n        const checkbox = new FieldCheckbox();\n        checkbox.setTooltip(Msg[\"MEDIA_PLAY_EXCERPT_HIGHLIGHT_LINK_TOOLTIP\"]);\n\n        const label = new FieldLabel(Msg[\"MEDIA_PLAY_EXCERPT_HIGHLIGHT_LINK\"]);\n        label.setTooltip(Msg[\"MEDIA_PLAY_EXCERPT_HIGHLIGHT_LINK_TOOLTIP\"]);\n\n        input\n          .appendField(checkbox, \"HIGHLIGHT_LINK\")\n          .appendField(label, \"HIGHLIGHT_LINK_LABEL\");\n      }\n    } else {\n      input.fieldRow\n        .map((field) => field.name)\n        .forEach((name) => {\n          input.removeField(name);\n        });\n    }\n\n    if (this.hasThen_) {\n      // Update plus/minus buttons.\n      if (this.getField(\"PLUS\")) {\n        this.getInput(\"PLUS_MINUS\").removeField(\"PLUS\");\n      }\n      if (!this.getField(\"MINUS\")) {\n        this.getInput(\"PLUS_MINUS\").appendField(createMinusField(), \"MINUS\");\n      }\n      // Add \"then\" input.\n      if (!this.getInput(\"THEN\")) {\n        this.appendStatementInput(\"THEN\").appendField(\n          Msg[\"MEDIA_PLAY_EXCERPT_THEN\"]\n        );\n      }\n    } else {\n      // Update plus/minus buttons.\n      if (!this.getField(\"PLUS\")) {\n        this.getInput(\"PLUS_MINUS\").appendField(createPlusField(), \"PLUS\");\n      }\n      if (this.getField(\"MINUS\")) {\n        this.getInput(\"PLUS_MINUS\").removeField(\"MINUS\");\n      }\n      // Remove \"then\" input.\n      if (this.getInput(\"THEN\")) {\n        this.removeInput(\"THEN\");\n      }\n    }\n  },\n};\n\n/**\n * Adds the initial plus button.\n * @this {Blockly.Block}\n */\nconst MEDIA_PLAY_EXCERPT_MUTATOR_HELPER = function () {\n  this.setOnChange(function (evt) {\n    if (evt.isUiEvent) return;\n\n    const parent_block = this.getSurroundParent();\n    const hasLinkHighlight =\n      parent_block && parent_block.type === \"links_click\";\n\n    if (this.hasLinkHighlight_ !== hasLinkHighlight) {\n      this.hasLinkHighlight_ = !!hasLinkHighlight;\n      this.updateShape_();\n    }\n  });\n\n  this.updateShape_();\n};\n\nExtensions.registerMutator(\n  \"media_play_excerpt_mutator\",\n  MEDIA_PLAY_EXCERPT_MUTATOR_MIXIN,\n  MEDIA_PLAY_EXCERPT_MUTATOR_HELPER,\n  [\"media_play_excerpt_then\"]\n);\n","import { defineBlocksWithJsonArray, Extensions, Msg } from \"blockly/core\";\nimport { createMinusField } from \"@blockly/block-plus-minus/src/field_minus\";\nimport { createPlusField } from \"@blockly/block-plus-minus/src/field_plus\";\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"reactivity_when\",\n    message0: \"%{BKY_REACTIVITY_WHEN}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"PLUS_MINUS\",\n      },\n      {\n        type: \"input_value\",\n        name: \"CONDITION\",\n        check: \"Boolean\",\n      },\n    ],\n    message1: \"%{BKY_REACTIVITY_WHEN_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    mutator: \"reactivity_when_mutator\",\n    inputsInline: true,\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_REACTIVITY_WHEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_REACTIVITY_WHEN_HELPURL}\",\n  },\n  // Block representing the else statement in the reactivity_when mutator.\n  {\n    type: \"reactivity_when_else\",\n    message0: \"%{BKY_REACTIVITY_WHEN_ELSE}\",\n    previousStatement: null,\n    enableContextMenu: false,\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_REACTIVITY_WHEN_ELSE_TOOLTIP}\",\n    helpUrl: \"%{BKY_REACTIVITY_WHEN_ELSE_HELPURL}\",\n  },\n]);\n\n/**\n * Mutator methods added to reactivity_when block.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst REACTIVITY_WHEN_MUTATOR_MIXIN = {\n  hasElse_: false,\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{hasElse: (boolean|undefined)}}\n   *     The state of this block.\n   */\n  saveExtraState: function () {\n    if (!this.hasElse_) {\n      return null;\n    }\n\n    const data = {};\n    if (this.hasElse_) {\n      data.hasElse = true;\n    }\n    return data;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block.\n   */\n  loadExtraState: function (state) {\n    this.hasElse_ = state[\"hasElse\"] || false;\n    this.updateShape_();\n  },\n\n  /**\n   * Callback for the plus field.\n   */\n  plus: function () {\n    this.hasElse_ = true;\n    this.updateShape_();\n  },\n\n  /**\n   * Callback for the minus field.\n   * @this {Blockly.Block}\n   */\n  minus: function () {\n    this.hasElse_ = false;\n    this.updateShape_();\n  },\n\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @this {Block}\n   * @private\n   */\n  updateShape_: function () {\n    if (this.hasElse_) {\n      // Update plus/minus buttons.\n      if (this.getField(\"PLUS\")) {\n        this.getInput(\"PLUS_MINUS\").removeField(\"PLUS\");\n      }\n      if (!this.getField(\"MINUS\")) {\n        this.getInput(\"PLUS_MINUS\").appendField(createMinusField(), \"MINUS\");\n      }\n      // Add \"else\" input.\n      if (!this.getInput(\"ELSE\")) {\n        this.appendStatementInput(\"ELSE\").appendField(\n          Msg[\"REACTIVITY_WHEN_ELSE\"]\n        );\n      }\n    } else {\n      // Update plus/minus buttons.\n      if (!this.getField(\"PLUS\")) {\n        this.getInput(\"PLUS_MINUS\").appendField(createPlusField(), \"PLUS\");\n      }\n      if (this.getField(\"MINUS\")) {\n        this.getInput(\"PLUS_MINUS\").removeField(\"MINUS\");\n      }\n      // Remove \"else\" input.\n      if (this.getInput(\"ELSE\")) {\n        this.removeInput(\"ELSE\");\n      }\n    }\n  },\n};\n\n/**\n * Adds the initial plus button.\n * @this {Blockly.Block}\n */\nconst REACTIVITY_WHEN_MUTATOR_HELPER = function () {\n  this.updateShape_();\n};\n\nExtensions.registerMutator(\n  \"reactivity_when_mutator\",\n  REACTIVITY_WHEN_MUTATOR_MIXIN,\n  REACTIVITY_WHEN_MUTATOR_HELPER,\n  [\"reactivity_when_else\"]\n);\n"],"names":["defineBlocksWithJsonArray","type","message0","message1","args1","name","style","tooltip","helpUrl","previousStatement","nextStatement","output","BREADCRUMB_SEPARATOR","SUPPORTED_PROPERTIES","getComponentOptions","components","arguments","length","undefined","recursive","breadcrumb_","_useModule","useModule","activeScenario","getComponentChildren","getComponentLabel","getComponentIconURL","options","forEach","c","label","icon_url","document","createElement","classList","add","icon","src","appendChild","text","createTextNode","breadcrumb_text","breadcrumb","setAttribute","children","sub_components","includes","reverse","option","expanded","id","unref","push","getPropertyOptions","component_type","EMPTY_OPTION","Msg","COMPONENTS_EMPTY_OPTION","concat","_toConsumableArray","map","property","COMPONENTS_PROPERTY","_useModule2","getModelByType","Object","keys","properties","filter","scenarioOptions","ref","watchEffect","_useModule3","getComponentsByType","value","Extensions","register","scenario_input","this","getInput","scenario_field","FieldDropdown","block","getSourceBlock","setEnabled","setTooltip","COMPONENTS_NO_SCENARIO_TOOLTIP","searchable","appendField","blockOptions","_useModule4","block_input","block_field","COMPONENTS_NO_BLOCK_TOOLTIP","componentOptions","_useModule5","_this","component_input","mock","endsWith","component_field","empty_option","default","hidden","COMPONENTS_PROPERTY_MOCK_TOOLTIP","replace","property_","property_input","property_field","component_value","getFieldValue","getComponentType_","PROPERTY_OPTIONS_MUTATOR_MIXIN","saveExtraState","loadExtraState","state","onchange","evt","updatePropertyField_","element","newType","newValue","oldType","oldValue","updateChecks_","_component_value$spli","split","_component_value$spli2","_slicedToArray","getPropertyValueTypeCheck_","property_name","_getModelByType$prope","_useModule6","format","Array","isArray","find","t","_this2","getField","getOptions","match","o","setValue","property_value","value_input","setCheck","outputConnection","registerMutator","args0","extensions","inputsInline","mutator","check","Css","triggerOptions","parser","DOMParser","ids","Set","component","doc","parseFromString","querySelectorAll","el","dataset","behaviorTrigger","size","LINKS_EMPTY_OPTION","from","sort","field","LINKS_CLICK_EMPTY_TOOLTIP","LINKS_CLICK_TOOLTIP","getExtraBlockState","JSON","stringify","mutationToDom","Blockly","domToText","createMinusField","args","minus","minusImage","onClick_","args_","minusField","isInFlyout","setGroup","oldExtraState","newExtraState","fire","BlockChange","createPlusField","plus","plusImage","plusField","enableContextMenu","MEDIA_PLAY_EXCERPT_MUTATOR_MIXIN","hasThen_","hasLinkHighlight_","data","hasLinkHighlight","hasThen","updateShape_","input","checkbox","FieldCheckbox","FieldLabel","fieldRow","removeField","appendStatementInput","removeInput","MEDIA_PLAY_EXCERPT_MUTATOR_HELPER","setOnChange","isUiEvent","parent_block","getSurroundParent","REACTIVITY_WHEN_MUTATOR_MIXIN","hasElse_","hasElse","REACTIVITY_WHEN_MUTATOR_HELPER"],"sourceRoot":""}