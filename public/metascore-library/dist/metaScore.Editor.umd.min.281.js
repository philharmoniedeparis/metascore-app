"use strict";(("undefined"!==typeof self?self:this)["webpackChunkmetaScore"]=("undefined"!==typeof self?self:this)["webpackChunkmetaScore"]||[]).push([[281],{75597:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ue}});var n=i(61786),r=(i(28706),i(39563)),o=i(59725),a=i(73941),s=i(64002),l=i(94037),u=i(88307),c=i(47154),h=i(99876),d=i(53221),f=i(4084),p=i(80557),g=i(63885),v=i(31250),m=i(42661),w=i(3258),b=i(94004),k=i(28483),y=i(58263),V=i(4132),A=i(50747),_=i(45015),I=i(37591),T=i(9847),x=(i(2008),i(26099),i(11392),i(17845)),B=i(31604),E=i(13656),S=i(7513),F=(i(44114),i(34782),i(23500),i(5506),i(23792),i(27495),i(90906),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953),function(){function e(){(0,k.A)(this,e),this._definitions=new Set}return(0,y.A)(e,[{key:"length",get:function(){return this._definitions.size}},{key:"add",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t._definitions.add(e)})):this._definitions.add(e)}},{key:"getDispatcher",value:function(){var e=this;return function(t){t.on("attribute:behaviorTrigger",(function(t,i,n){if(n.consumable.test(i.item,"attribute:behaviorTrigger")&&(i.item.is("selection")||n.schema.isInline(i.item))){var r,o=n.writer,a=o.document.selection,s=(0,I.A)(e._definitions);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=o.createAttributeElement("a",l.attributes,{priority:5});for(var c in l.classes&&o.addClass(l.classes,u),l.styles)o.setStyle(c,l.styles[c],u);o.setCustomProperty("behaviorTrigger",!0,u),l.callback(i.attributeNewValue)?i.item.is("selection")?o.wrap(a.getFirstRange(),u):o.wrap(n.mapper.toViewRange(i.range),u):o.unwrap(n.mapper.toViewRange(i.range),u)}}catch(h){s.e(h)}finally{s.f()}}}),{priority:"high"})}}}])}()),C="Ctrl+T";function P(e){return e.is("attributeElement")&&!!e.getCustomProperty("behaviorTrigger")}function L(e,t){var i=t.writer,n=i.createAttributeElement("a",{"data-behavior-trigger":e},{priority:5});return i.setCustomProperty("behaviorTrigger",!0,n),n}function D(e,t){return!!e&&t.checkAttribute(e.name,"behaviorTrigger")}var O=function(e){function t(e){var i;return(0,k.A)(this,t),i=(0,V.A)(this,t,[e]),i.manualDecorators=new S.pM,i.automaticDecorators=new F,i}return(0,A.A)(t,e),(0,y.A)(t,[{key:"restoreManualDecoratorStates",value:function(){var e,t=(0,I.A)(this.manualDecorators);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.value=this._getDecoratorStateFromModel(i.id)}}catch(n){t.e(n)}finally{t.f()}}},{key:"refresh",value:function(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||(0,S.$1)(t.getSelectedBlocks());D(i,e.schema)?(this.value=i.getAttribute("behaviorTrigger"),this.isEnabled=e.schema.checkAttribute(i,"behaviorTrigger")):(this.value=t.getAttribute("behaviorTrigger"),this.isEnabled=e.schema.checkAttributeInSelection(t,"behaviorTrigger"));var n,r=(0,I.A)(this.manualDecorators);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.value=this._getDecoratorStateFromModel(o.id)}}catch(a){r.e(a)}finally{r.f()}}},{key:"execute",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.editor.model,r=n.document.selection,o=[],a=[];for(var s in i)i[s]?o.push(s):a.push(s);n.change((function(i){if(r.isCollapsed){var s=r.getFirstPosition();if(r.hasAttribute("behaviorTrigger")){var l=(0,B.Py)(s,"behaviorTrigger",r.getAttribute("behaviorTrigger"),n);i.setAttribute("behaviorTrigger",e,l),o.forEach((function(e){i.setAttribute(e,!0,l)})),a.forEach((function(e){i.removeAttribute(e,l)})),i.setSelection(i.createPositionAfter(l.end.nodeBefore))}else if(""!==e){var u=(0,S.av)(r.getAttributes());u.set("behaviorTrigger",e),o.forEach((function(e){u.set(e,!0)}));var c=n.insertContent(i.createText(e,u),s),h=c.end;i.setSelection(h)}["behaviorTrigger"].concat(o,a).forEach((function(e){i.removeSelectionAttribute(e)}))}else{var d,f=n.schema.getValidRanges(r.getRanges(),"behaviorTrigger"),p=[],g=(0,I.A)(r.getSelectedBlocks());try{for(g.s();!(d=g.n()).done;){var v=d.value;n.schema.checkAttribute(v,"behaviorTrigger")&&p.push(i.createRangeOn(v))}}catch(_){g.e(_)}finally{g.f()}var m,w=p.slice(),b=(0,I.A)(f);try{for(b.s();!(m=b.n()).done;){var k=m.value;t._isRangeToUpdate(k,p)&&w.push(k)}}catch(_){b.e(_)}finally{b.f()}var y,V=(0,I.A)(w);try{var A=function(){var t=y.value;i.setAttribute("behaviorTrigger",e,t),o.forEach((function(e){i.setAttribute(e,!0,t)})),a.forEach((function(e){i.removeAttribute(e,t)}))};for(V.s();!(y=V.n()).done;)A()}catch(_){V.e(_)}finally{V.f()}}}))}},{key:"_getDecoratorStateFromModel",value:function(e){var t=this.editor.model,i=t.document.selection,n=i.getSelectedElement();return D(n,t.schema)?n.getAttribute(e):i.getAttribute(e)}},{key:"_isRangeToUpdate",value:function(e,t){var i,n=(0,I.A)(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.containsRange(e))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}}])}(_.uB),U=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();D(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"behaviorTrigger"):this.isEnabled=e.schema.checkAttributeInSelection(t,"behaviorTrigger")}},{key:"execute",value:function(){var e=this.editor,t=this.editor.model,i=t.document.selection,n=e.commands.get("addBehaviorTrigger");t.change((function(e){var r,o=i.isCollapsed?[(0,B.Py)(i.getFirstPosition(),"behaviorTrigger",i.getAttribute("behaviorTrigger"),t)]:t.schema.getValidRanges(i.getRanges(),"behaviorTrigger"),a=(0,I.A)(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(e.removeAttribute("behaviorTrigger",s),n){var l,u=(0,I.A)(n.manualDecorators);try{for(u.s();!(l=u.n()).done;){var c=l.value;e.removeAttribute(c.id,s)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){a.e(h)}finally{a.f()}}))}}])}(_.uB),M="ck-behaviortrigger_selected",R=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"behaviorTrigger"}),e.conversion.for("dataDowncast").attributeToElement({model:"behaviorTrigger",view:L}),e.conversion.for("editingDowncast").attributeToElement({model:"behaviorTrigger",view:function(e,t){return L(e,t)}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{"data-behavior-trigger":!0}},model:{key:"behaviorTrigger",value:function(e){return e.getAttribute("data-behavior-trigger")}}}),e.commands.add("addBehaviorTrigger",new O(e)),e.commands.add("removeBehaviorTrigger",new U(e));var t=e.plugins.get(B.Vp);t.registerAttribute("behaviorTrigger"),(0,B.Il)(e,"behaviorTrigger","a",M),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}},{key:"_enableInsertContentSelectionAttributesFixer",value:function(){var e=this.editor,t=e.model,i=t.document.selection;this.listenTo(t,"insertContent",(function(){var e=i.anchor.nodeBefore,n=i.anchor.nodeAfter;i.hasAttribute("behaviorTrigger")&&e&&e.hasAttribute("behaviorTrigger")&&(n&&n.hasAttribute("behaviorTrigger")||t.change((function(e){H(e,N(t.schema))})))}),{priority:"low"})}},{key:"_enableClickingAfterLink",value:function(){var e=this.editor,t=e.model;e.editing.view.addObserver(x.q$);var i=!1;this.listenTo(e.editing.view.document,"mousedown",(function(){i=!0})),this.listenTo(e.editing.view.document,"selectionChange",(function(){if(i){i=!1;var e=t.document.selection;if(e.isCollapsed&&e.hasAttribute("behaviorTrigger")){var n=e.getFirstPosition(),r=(0,B.Py)(n,"behaviorTrigger",e.getAttribute("behaviorTrigger"),t);(n.isTouching(r.start)||n.isTouching(r.end))&&t.change((function(e){H(e,N(t.schema))}))}}}))}},{key:"_enableTypingOverLink",value:function(){var e,t,i=this.editor,n=i.editing.view;this.listenTo(n.document,"delete",(function(){t=!0}),{priority:"high"}),this.listenTo(i.model,"deleteContent",(function(){var n=i.model.document.selection;n.isCollapsed||(t?t=!1:$(i)&&G(i.model)&&(e=n.getAttributes()))}),{priority:"high"}),this.listenTo(i.model,"insertContent",(function(n,r){var o=(0,T.A)(r,1),a=o[0];t=!1,$(i)&&e&&(i.model.change((function(t){var i,n=(0,I.A)(e);try{for(n.s();!(i=n.n()).done;){var r=(0,T.A)(i.value,2),o=r[0],s=r[1];t.setAttribute(o,s,a)}}catch(l){n.e(l)}finally{n.f()}})),e=null)}),{priority:"high"})}},{key:"_handleDeleteContentAfterLink",value:function(){var e=this.editor,t=e.model,i=t.document.selection,n=e.editing.view,r=!1,o=!1;this.listenTo(n.document,"delete",(function(e,t){o=t.domEvent.keyCode===S.uP.backspace}),{priority:"high"}),this.listenTo(t,"deleteContent",(function(){r=!1;var e=i.getFirstPosition(),n=i.getAttribute("behaviorTrigger");if(n){var o=(0,B.Py)(e,"behaviorTrigger",n,t);r=o.containsPosition(e)||o.end.isEqual(e)}}),{priority:"high"}),this.listenTo(t,"deleteContent",(function(){o&&(o=!1,r||e.model.enqueueChange((function(e){H(e,N(t.schema))})))}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"BehaviorTriggerEditing"}},{key:"requires",get:function(){return[B.Vp,B.pd,E.xz]}}])}(_.k_);function H(e,t){e.removeSelectionAttribute("behaviorTrigger");var i,n=(0,I.A)(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.removeSelectionAttribute(r)}}catch(o){n.e(o)}finally{n.f()}}function G(e){var t=e.document.selection,i=t.getFirstPosition(),n=t.getLastPosition(),r=i.nodeAfter;if(!r)return!1;if(!r.is("$text"))return!1;if(!r.hasAttribute("behaviorTrigger"))return!1;var o=n.textNode||n.nodeBefore;if(r===o)return!0;var a=(0,B.Py)(i,"behaviorTrigger",r.getAttribute("behaviorTrigger"),e);return a.containsRange(e.createRange(i,n),!0)}function $(e){var t=e.model.change((function(e){return e.batch}));return t.isTyping}function N(e){var t=e.getDefinition("$text").allowAttributes;return t.filter((function(e){return e.startsWith("behaviorTrigger")}))}var z=i(71066),q=(i(94490),i(25440),i(42762),i(67504)),W=i(87102),j=i(22035),X=(i(62062),function(e){function t(e,i){var n;(0,k.A)(this,t),n=(0,V.A)(this,t,[e]);var r=e.t;n.focusTracker=new S.$x,n.keystrokes=new S.EP,n.idInputView=n._createIdInput(),n.saveButtonView=n._createButton(r("Save"),_.Pt.check,"ck-button-save"),n.saveButtonView.type="submit",n.cancelButtonView=n._createButton(r("Cancel"),_.Pt.cancel,"ck-button-cancel","cancel"),n._manualDecoratorSwitches=n._createManualDecoratorSwitches(i),n.children=n._createFormChildren(i.manualDecorators),n._focusables=new q.s3,n._focusCycler=new q.H({focusables:n._focusables,focusTracker:n.focusTracker,keystrokeHandler:n.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var o=["ck","ck-behaviortrigger-form","ck-responsive-form"];return i.manualDecorators.length&&o.push("ck-behaviortrigger-form_layout-vertical","ck-vertical-form"),n.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:n.children}),n}return(0,A.A)(t,e),(0,y.A)(t,[{key:"getDecoratorSwitchesState",value:function(){return Array.from(this._manualDecoratorSwitches).reduce((function(e,t){return e[t.name]=t.isOn,e}),{})}},{key:"render",value:function(){var e=this;(0,z.A)(t,"render",this,3)([]),(0,q.Z5)({view:this});var i=[this.idInputView].concat((0,n.A)(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]);i.forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}},{key:"destroy",value:function(){(0,z.A)(t,"destroy",this,3)([]),this.focusTracker.destroy(),this.keystrokes.destroy()}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createIdInput",value:function(){var e=this.locale.t,t=new q.xE(this.locale,q.Vr);return t.label=e("Trigger ID"),t}},{key:"_createButton",value:function(e,t,i,n){var r=new q._(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.extendTemplate({attributes:{class:i}}),n&&r.delegate("execute").to(this,n),r}},{key:"_createManualDecoratorSwitches",value:function(e){var t,i=this,n=this.createCollection(),r=(0,I.A)(e.manualDecorators);try{var o=function(){var r=t.value,o=new q.Wm(i.locale);o.set({name:r.id,label:r.label,withText:!0}),o.bind("isOn").toMany([r,e],"value",(function(e,t){return void 0===t&&void 0===e?r.defaultValue:e})),o.on("execute",(function(){r.set("value",!o.isOn)})),n.add(o)};for(r.s();!(t=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return n}},{key:"_createFormChildren",value:function(e){var t=this.createCollection();if(t.add(this.idInputView),e.length){var i=new q.Ss;i.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map((function(e){return{tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(i)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}])}(q.Ss)),Z='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 22 22">\n  <path d="m15.34 1.768-4.506 7.721 5.661.797v.329L6.687 20.26l-.028-.029 4.641-8.105-5.795-.852v-.329l9.782-9.205zM19.035 19.465 17.48 21.02a.824.824 0 1 1-1.207-1.125l.041-.041 1.555-1.557-1.557-1.555a.824.824 0 0 1 1.166-1.166l1.556 1.555 1.557-1.557a.825.825 0 1 1 1.166 1.168l-1.555 1.555 1.555 1.557a.824.824 0 1 1-1.166 1.166l-1.556-1.555z"/>\n</svg>\n',J=function(e){function t(e){var i;(0,k.A)(this,t),i=(0,V.A)(this,t,[e]);var n=e.t;return i.focusTracker=new S.$x,i.keystrokes=new S.EP,i.previewLabelView=i._createPreviewLabel(),i.removeTriggerButtonView=i._createButton(n("Remove"),Z,"removeBehaviorTrigger"),i.editButtonView=i._createButton(n("Edit"),_.Pt.pencil,"edit"),i.set("id"),i._focusables=new q.s3,i._focusCycler=new q.H({focusables:i._focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),i.setTemplate({tag:"div",attributes:{class:["ck","ck-behaviortrigger-actions","ck-responsive-form"],tabindex:"-1"},children:[i.previewLabelView,i.editButtonView,i.removeTriggerButtonView]}),i}return(0,A.A)(t,e),(0,y.A)(t,[{key:"render",value:function(){var e=this;(0,z.A)(t,"render",this,3)([]);var i=[this.previewLabelView,this.editButtonView,this.removeTriggerButtonView];i.forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}},{key:"destroy",value:function(){(0,z.A)(t,"destroy",this,3)([]),this.focusTracker.destroy(),this.keystrokes.destroy()}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createButton",value:function(e,t,i){var n=new q._(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.delegate("execute").to(this,i),n}},{key:"_createPreviewLabel",value:function(){var e=new q.y0(this.locale),t=this.t;return e.extendTemplate({attributes:{class:["ck","ck-behaviortrigger-actions__preview"]}}),e.bind("text").to(this,"id",(function(e){return e||t("This trigger has no ID")})),e}}])}(q.Ss),K='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 22 22">\n  <path d="m15.34 1.768-4.506 7.721 5.661.797v.329L6.687 20.26l-.028-.029 4.641-8.105-5.795-.852v-.329l9.782-9.205z"/>\n</svg>\n',Q="behaviortrigger-ui",Y=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,[{key:"init",value:function(){var e=this.editor;e.editing.view.addObserver(x.Re),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(q.pU),this._createToolbarAddButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:Q,view:{classes:["ck-fake-behaviortrigger-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Q,view:{name:"span",classes:["ck-fake-behaviortrigger-selection","ck-fake-behaviortrigger-selection_collapsed"]}})}},{key:"destroy",value:function(){(0,z.A)(t,"destroy",this,3)([]),this.formView.destroy()}},{key:"_createActionsView",value:function(){var e=this,t=this.editor,i=new J(t.locale),n=t.commands.get("addBehaviorTrigger"),r=t.commands.get("removeBehaviorTrigger");return i.bind("id").to(n,"value"),i.editButtonView.bind("isEnabled").to(n),i.removeTriggerButtonView.bind("isEnabled").to(r),this.listenTo(i,"edit",(function(){e._addFormView()})),this.listenTo(i,"removeBehaviorTrigger",(function(){t.execute("removeBehaviorTrigger"),e._hideUI()})),i.keystrokes.set("Esc",(function(t,i){e._hideUI(),i()})),i.keystrokes.set(C,(function(t,i){e._addFormView(),i()})),i}},{key:"_createFormView",value:function(){var e=this,t=this.editor,i=t.commands.get("addBehaviorTrigger"),n=new((0,q.wi)(X))(t.locale,i);return n.idInputView.fieldView.bind("value").to(i,"value"),n.idInputView.bind("isReadOnly").to(i,"isEnabled",(function(e){return!e})),n.saveButtonView.bind("isEnabled").to(i),this.listenTo(n,"submit",(function(){var i=n.idInputView.fieldView.element.value;t.execute("addBehaviorTrigger",i,n.getDecoratorSwitchesState()),e._closeFormView()})),this.listenTo(n,"cancel",(function(){e._closeFormView()})),n.keystrokes.set("Esc",(function(t,i){e._closeFormView(),i()})),n}},{key:"_createToolbarAddButton",value:function(){var e=this,t=this.editor,i=t.commands.get("addBehaviorTrigger"),n=t.t;t.keystrokes.set(C,(function(t,n){n(),i.isEnabled&&e._showUI(!0)})),t.ui.componentFactory.add("addBehaviorTrigger",(function(t){var r=new q._(t);return r.label=n("Behavior"),r.icon=K,r.keystroke=C,r.tooltip=!0,r.withText=!0,r.isToggleable=!0,r.bind("isEnabled").to(i,"isEnabled"),r.bind("isOn").to(i,"value",(function(e){return!!e})),e.listenTo(r,"execute",(function(){return e._showUI(!0)})),r}))}},{key:"_enableUserBalloonInteractions",value:function(){var e=this,t=this.editor.editing.view.document;this.listenTo(t,"click",(function(){var t=e._getSelectedLinkElement();t&&e._showUI()})),this.editor.keystrokes.set("Tab",(function(t,i){e._areActionsVisible&&!e.actionsView.focusTracker.isFocused&&(e.actionsView.focus(),i())}),{priority:"high"}),this.editor.keystrokes.set("Esc",(function(t,i){e._isUIVisible&&(e._hideUI(),i())})),(0,q.wy)({emitter:this.formView,activator:function(){return e._isUIInPanel},contextElements:[this._balloon.view.element],callback:function(){return e._hideUI()}})}},{key:"_addActionsView",value:function(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}},{key:"_addFormView",value:function(){if(!this._isFormInPanel){var e=this.editor,t=e.commands.get("addBehaviorTrigger"),i=e.model.document.selection;this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.idInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.idInputView.fieldView.element.value=t.value||this._generateIdFromSelection(i)}}},{key:"_closeFormView",value:function(){var e=this.editor.commands.get("addBehaviorTrigger");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}},{key:"_removeFormView",value:function(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}},{key:"_showUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}},{key:"_hideUI",value:function(){if(this._isUIInPanel){var e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}}},{key:"_startUpdatingUI",value:function(){var e=this,t=this.editor,i=t.editing.view.document,n=this._getSelectedLinkElement(),r=a(),o=function(){var t=e._getSelectedLinkElement(),i=a();n&&!t||!n&&i!==r?e._hideUI():e._isUIVisible&&e._balloon.updatePosition(e._getBalloonPositionData()),n=t,r=i};function a(){return i.selection.focus.getAncestors().reverse().find((function(e){return e.is("element")}))}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}},{key:"_isFormInPanel",get:function(){return this._balloon.hasView(this.formView)}},{key:"_areActionsInPanel",get:function(){return this._balloon.hasView(this.actionsView)}},{key:"_areActionsVisible",get:function(){return this._balloon.visibleView===this.actionsView}},{key:"_isUIInPanel",get:function(){return this._isFormInPanel||this._areActionsInPanel}},{key:"_isUIVisible",get:function(){var e=this._balloon.visibleView;return e==this.formView||this._areActionsVisible}},{key:"_getBalloonPositionData",value:function(){var e=this,t=this.editor.editing.view,i=this.editor.model,n=t.document,r=null;if(i.markers.has(Q)){var o=Array.from(this.editor.editing.mapper.markerNameToElements(Q)),a=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));r=t.domConverter.viewRangeToDom(a)}else r=function(){var i=e._getSelectedLinkElement();return i?t.domConverter.mapViewToDom(i):t.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:r}}},{key:"_getSelectedLinkElement",value:function(){var e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&(0,W.p4)(i))return ee(t.getFirstPosition());var n=t.getFirstRange().getTrimmed(),r=ee(n.start),o=ee(n.end);return r&&r==o&&e.createRangeIn(r).getTrimmed().isEqual(n)?r:null}},{key:"_showFakeVisualSelection",value:function(){var e=this.editor.model;e.change((function(t){var i=e.document.selection.getFirstRange();if(e.markers.has(Q))t.updateMarker(Q,{range:i});else if(i.start.isAtEnd){var n=i.start.getLastMatchingPosition((function(t){var i=t.item;return!e.schema.isContent(i)}),{boundaries:i});t.addMarker(Q,{usingOperation:!1,affectsData:!1,range:t.createRange(n,i.end)})}else t.addMarker(Q,{usingOperation:!1,affectsData:!1,range:i})}))}},{key:"_hideFakeVisualSelection",value:function(){var e=this.editor.model;e.markers.has(Q)&&e.change((function(e){e.removeMarker(Q)}))}},{key:"_generateIdFromSelection",value:function(e){var t,i="",n=(0,I.A)(e.getRanges());try{for(n.s();!(t=n.n()).done;){var r,o=t.value,a=(0,I.A)(o.getItems());try{for(a.s();!(r=a.n()).done;){var s=r.value;i+=(0,j.A)(s)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){n.e(l)}finally{n.f()}return i=i.replace(/[«»!"#$%&'()*+,/:;<=>?@[\\\]^`{|}~]/g,""),i=i.substring(0,20),i=i.trim(),i=i.toLowerCase(),i=i.replace(/(\s|\.)/g,"-"),i=i.replace(/-{2,}/g,"-"),i=i.replace(/—/g,"--"),i}}],[{key:"requires",get:function(){return[q.pU]}},{key:"pluginName",get:function(){return"BehaviorTriggerUI"}}])}(_.k_);function ee(e){return e.getAncestors().find((function(e){return P(e)}))}var te=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,null,[{key:"requires",get:function(){return[R,Y]}},{key:"pluginName",get:function(){return"BehaviorTrigger"}}])}(_.k_),ie=i(54477),ne=i(99493),re=function(e){function t(e){var i;return(0,k.A)(this,t),i=(0,V.A)(this,t,[e]),i.set("type",null),i.set("params",{}),i.on("change:value",(function(e,t,n){if(i.type="url",i.params={},n){var r=(0,ne.Su)("app_components"),o=r.getLinkActions,a=o(n);if(a&&a.length>0){var s=a[0];switch(i.params=(0,ie.omit)(s,["type"]),s.type){case"page":i.type=s.type,i.params.index++;break;case"showBlock":i.type="toggle",i.params.action="show";break;case"hideBlock":i.type="toggle",i.params.action="hide";break;case"toggleBlock":i.type="toggle",i.params.action="toggle";break;case"enterFullscreen":i.type="fullscreen",i.params.action="enter";break;case"exitFullscreen":i.type="fullscreen",i.params.action="exit";break;case"toggleFullscreen":i.type="fullscreen",i.params.action="toggle";break;default:i.type=s.type}}}})),i}return(0,A.A)(t,e),(0,y.A)(t)}(f.ql),oe=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,[{key:"init",value:function(){(0,z.A)(t,"init",this,3)([]);var e=this.editor;e.commands.add("link",new re(e))}}],[{key:"pluginName",get:function(){return"CustomLinkEditing"}}])}(f.vw),ae=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,null,[{key:"requires",get:function(){return["Delete",oe]}},{key:"pluginName",get:function(){return"CustomAutoLink"}}])}(f.sm),se=i(71803),le=i(84397),ue=(i(53921),i(16034),i(74078)),ce=(i(46226),function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.min,o=n.max;(0,k.A)(this,t),i=(0,V.A)(this,t,[e]);var a=i.bindTemplate;return i.set("min",r),i.set("max",o),i.inputMode=null,i.template.tag="timecode-input",i.extendTemplate({attributes:{class:["ck-input-timecode"],min:a.to("min"),max:a.to("max")}}),i}return(0,A.A)(t,e),(0,y.A)(t,[{key:"_updateIsEmpty",value:function(){this.isEmpty=null===this.element.value}}])}(q.E6));function he(e,t,i){var n=new ce(e.locale);return n.set({id:t,ariaDescribedById:i}),n.bind("isReadOnly").to(e,"isEnabled",(function(e){return!e})),n.bind("hasError").to(e,"errorText",(function(e){return!!e})),n.on("input",(function(){e.errorText=null})),e.bind("isEmpty","isFocused","placeholder").to(n),n}function de(e){return{play:e("Play"),pause:e("Pause"),stop:e("Stop"),seek:e("Seek"),page:e("Page"),toggle:e("Show/hide a block"),scenario:e("Scenario"),fullscreen:e("Fullscreen"),url:e("URL")}}function fe(e){var t=(0,ne.Su)("app_components"),i=t.getComponentsByType,n={};return i(e).forEach((function(e){n[e.id]=e.name})),n}function pe(e){return{show:e("Show"),hide:e("Hide"),toggle:e("Toggle")}}function ge(e){return{enter:e("Enter"),exit:e("Exit"),toggle:e("Toggle")}}function ve(e){var t=new S.pM;return Object.entries(e).forEach((function(e){var i=(0,T.A)(e,2),n=i[0],r=i[1],o={type:"button",model:new q.Jc({_value:n,label:r,withText:!0})};t.add(o)})),t}var me=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,k.A)(this,t),i=(0,V.A)(this,t,[e]);var r=i.bindTemplate;return i.set("isVisible",!0),i.set("class",n.class||null),i.children=i.createCollection(),n.children&&n.children.forEach((function(e){return i.children.add(e)})),i.set("_role",null),i.setTemplate({tag:"div",attributes:{class:["ck","ck-form__group",r.to("class"),r.if("isVisible","ck-hidden",(function(e){return!e}))],role:r.to("_role"),"z-index":"-1"},children:i.children}),i}return(0,A.A)(t,e),(0,y.A)(t)}(q.Ss),we=i(61875),be='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n  <path fill="currentColor" d="M11.414 10l4.293-4.293a.999.999 0 1 0-1.414-1.414L10 8.586 5.707 4.293a.999.999 0 1 0-1.414 1.414L8.586 10l-4.293 4.293a.999.999 0 1 0 1.414 1.414L10 11.414l4.293 4.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L11.414 10z"/>\n</svg>\n',ke='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n  <path fill="currentColor" d="M9.293 13.707l-3-3a.999.999 0 1 1 1.414-1.414L9 10.586V3a1 1 0 1 1 2 0v7.586l1.293-1.293a.999.999 0 1 1 1.414 1.414l-3 3a.999.999 0 0 1-1.414 0zM17 16a1 1 0 1 1 0 2H3a1 1 0 1 1 0-2h14z"/>\n</svg>\n',ye='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n  <path fill="currentColor" d="M13.707 6.707a.997.997 0 0 1-1.414 0L11 5.414V13a1 1 0 1 1-2 0V5.414L7.707 6.707a.999.999 0 1 1-1.414-1.414l3-3a.999.999 0 0 1 1.414 0l3 3a.999.999 0 0 1 0 1.414zM17 18H3a1 1 0 1 1 0-2h14a1 1 0 1 1 0 2z"/>\n</svg>\n',Ve=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.in_button,o=void 0===r||r,a=n.out_button,s=void 0===a||a,l=n.clear_button,u=void 0===l||l;(0,k.A)(this,t),i=(0,V.A)(this,t,[e,he]);var c=e.t,h=(0,ne.Su)("media_player"),d=h.time,f=h.seekTo;i.toolbarView=null;var p=[];return o&&(i.inButton=new q._(e),i.inButton.set({icon:ke,tooltip:c("Set value to current media time")}),i.inButton.on("execute",(function(){i.fieldView.value=(0,we.R1)(d),i.fieldView.fire("input")})),p.push(i.inButton)),s&&(i.outButton=new q._(e),i.outButton.set({icon:ye,tooltip:c("Set current media time to this value")}),i.outButton.on("execute",(function(){f(i.fieldView.value)})),p.push(i.outButton)),u&&(i.clearButton=new q._(e),i.clearButton.set({icon:be,tooltip:c("Clear value")}),i.clearButton.on("execute",(function(){i.fieldView.value=null,i.fieldView.fire("input")})),p.push(i.clearButton)),p.length>0&&(i.toolbarView=new q.X3(e),i.toolbarView.items.addMany(p),i.fieldWrapperChildren.add(i.toolbarView)),i.extendTemplate({attributes:{class:["ck-labeled-field-view_timecode"]}}),i}return(0,A.A)(t,e),(0,y.A)(t,[{key:"render",value:function(){(0,z.A)(t,"render",this,3)([]),this.toolbarView&&this.fieldView.focusTracker.add(this.toolbarView.element)}}])}(q.xE),Ae='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" xml:space="preserve">\n  <path fill="currentColor" d="M10 .4C4.697.4.399 4.698.399 10A9.6 9.6 0 0 0 10 19.601c5.301 0 9.6-4.298 9.6-9.601 0-5.302-4.299-9.6-9.6-9.6zm.896 3.466c.936 0 1.211.543 1.211 1.164 0 .775-.62 1.492-1.679 1.492-.886 0-1.308-.445-1.282-1.182 0-.621.519-1.474 1.75-1.474zM8.498 15.75c-.64 0-1.107-.389-.66-2.094l.733-3.025c.127-.484.148-.678 0-.678-.191 0-1.022.334-1.512.664l-.319-.523c1.555-1.299 3.343-2.061 4.108-2.061.64 0 .746.756.427 1.92l-.84 3.18c-.149.562-.085.756.064.756.192 0 .82-.232 1.438-.719l.362.486c-1.513 1.512-3.162 2.094-3.801 2.094z"/>\n</svg>',_e=function(e){function t(e,i){var n;(0,k.A)(this,t),n=(0,V.A)(this,t,[e,i]);var r=n.locale.t;return n.set("type",null),n.set("params",{}),n.on("change:type",(function(e,t,i){switch(n.urlInputView.fieldView.value="",i){case"seek":n.params={time:0};break;case"toggle":n.params={action:"show"};break;case"fullscreen":n.params={action:"enter"};break;default:n.params={}}})),n.on("change:params",(function(){n.updateValue()})),n.urlInputView.fieldView.placeholder=r("https://example.com"),n}return(0,A.A)(t,e),(0,y.A)(t,[{key:"render",value:function(){var e=this;(0,z.A)(t,"render",this,3)([]);var i=[this.typeInputView,this._playInputsGroup,this._seekInputsGroup,this._pageInputsGroup,this._blockToggleInputsGroup,this._scenarioInputsGroup,this._fullscreenInputsGroup];this._focusables.addMany(i,0),i.forEach((function(t){e.focusTracker.add(t.element)}))}},{key:"_createTypeInput",value:function(){var e=this,t=this.locale.t,i=de(this.t),n=new q.xE(this.locale,q.By);n.set({label:t("Type")}),n.fieldView.buttonView.set({isOn:!1,withText:!0}),n.fieldView.buttonView.bind("label").to(this,"type",(function(e){return i[e]})),n.fieldView.on("execute",(function(t){e.type=t.source._value})),n.bind("isEmpty").to(this,"type",(function(e){return!e}));var r=ve(i);return r.map((function(t){t.model.bind("isOn").to(e,"type",(function(e){return e===t.model._value}))})),(0,q.O)(n.fieldView,r),n}},{key:"_createUrlInput",value:function(){var e=(0,z.A)(t,"_createUrlInput",this,3)([]),i=this.bindTemplate;return e.extendTemplate({attributes:{class:i.if("type","ck-fake-hidden",(function(e){return"url"!==e}))}}),e}},{key:"_createPlayInputs",value:function(){var e=this,t=this.locale,i=t.t,n=this.bindTemplate;this.playExcerptInputView=new q.Wm(t),this.playExcerptInputView.set({label:i("Excerpt"),withText:!0}),this.playExcerptInputView.bind("isOn").to(this,"params",(function(e){return!(null===e||void 0===e||!e.excerpt)})),this.playExcerptInputView.on("execute",(function(){var t;e.params=(0,le.A)((0,le.A)({},e.params),{},{excerpt:!(null!==(t=e.params)&&void 0!==t&&t.excerpt)})})),this.playStartInputView=new Ve(t),this.playStartInputView.set({label:i("Start time")}),this.playStartInputView.fieldView.bind("value").to(this,"params",(function(e){return null===e||void 0===e?void 0:e.start})),this.playStartInputView.fieldView.on("input",(function(){e.params=(0,le.A)((0,le.A)({},e.params),{},{start:e.playStartInputView.fieldView.element.value})})),this.playStartInputView.extendTemplate({attributes:{class:n.if("params","ck-hidden",(function(e){return!(null!==e&&void 0!==e&&e.excerpt)}))}}),this.playEndInputView=new Ve(t),this.playEndInputView.set({label:i("End time")}),this.playEndInputView.fieldView.bind("value").to(this,"params",(function(e){return null===e||void 0===e?void 0:e.end})),this.playEndInputView.fieldView.on("input",(function(){e.params=(0,le.A)((0,le.A)({},e.params),{},{end:e.playEndInputView.fieldView.element.value})})),this.playEndInputView.extendTemplate({attributes:{class:n.if("params","ck-hidden",(function(e){return!(null!==e&&void 0!==e&&e.excerpt)}))}});var r=fe("Scenario");this.playScenarioInputView=new q.xE(t,q.By),this.playScenarioInputView.set({label:i("Scenario")}),this.playScenarioInputView.fieldView.buttonView.set({isOn:!1,withText:!0}),this.playScenarioInputView.fieldView.buttonView.bind("label").to(this,"params",(function(e){return r[null===e||void 0===e?void 0:e.scenario]})),this.playScenarioInputView.fieldView.on("execute",(function(t){e.params=(0,le.A)((0,le.A)({},e.params),{},{scenario:t.source._value})})),this.playScenarioInputView.bind("isEmpty").to(this,"params",(function(e){return!(null!==e&&void 0!==e&&e.scenario)})),this.playScenarioInputView.extendTemplate({attributes:{class:n.if("params","ck-hidden",(function(e){return!(null!==e&&void 0!==e&&e.excerpt)}))}});var o=ve(r);o.map((function(t){t.model.bind("isOn").to(e,"params",(function(e){return(null===e||void 0===e?void 0:e.scenario)===t.model._value}))})),(0,q.O)(this.playScenarioInputView.fieldView,o),this.playHighlightInputView=new q.Wm(t),this.playHighlightInputView.set({label:i("Auto-highlight"),withText:!0,tooltip:i("Highlight the link when the current media time is between its time limits")}),this.playHighlightInputView.bind("isOn").to(this,"params",(function(e){return!(null===e||void 0===e||!e.highlight)})),this.playHighlightInputView.on("execute",(function(){var t;e.params=(0,le.A)((0,le.A)({},e.params),{},{highlight:!(null!==(t=e.params)&&void 0!==t&&t.highlight)})})),this.playHighlightInputView.extendTemplate({attributes:{class:n.if("params","ck-hidden",(function(e){return!(null!==e&&void 0!==e&&e.excerpt)}))}});var a=new me(t,{children:[this.playExcerptInputView,this.playStartInputView,this.playEndInputView,this.playScenarioInputView,this.playHighlightInputView]});return a.bind("isVisible").to(this,"type",(function(e){return"play"===e})),a}},{key:"_createSeekInputs",value:function(){var e=this,t=this.locale,i=t.t;this.seekTimeInputView=new Ve(t,{clear_button:!1}),this.seekTimeInputView.set({label:i("Time")}),this.seekTimeInputView.fieldView.bind("value").to(this,"params",(function(e){return null===e||void 0===e?void 0:e.time})),this.seekTimeInputView.fieldView.on("input",(function(){e.params=(0,le.A)((0,le.A)({},e.params),{},{time:e.seekTimeInputView.fieldView.element.value})}));var n=new me(t,{children:[this.seekTimeInputView]});return n.bind("isVisible").to(this,"type",(function(e){return"seek"===e})),n}},{key:"_createPageInputs",value:function(){var e=this,t=this.locale,i=t.t,n=Object.fromEntries(Object.values(fe("Block")).map((function(e){return[e,e]})));this.pageBlockInputView=new q.xE(t,q.By),this.pageBlockInputView.set({label:i("Block")}),this.pageBlockInputView.fieldView.buttonView.set({isOn:!1,withText:!0}),this.pageBlockInputView.fieldView.buttonView.bind("label").to(this,"params",(function(e){return null===e||void 0===e?void 0:e.block})),this.pageBlockInputView.fieldView.on("execute",(function(t){e.params=(0,le.A)((0,le.A)({},e.params),{},{block:t.source._value})})),this.pageBlockInputView.bind("isEmpty").to(this,"params",(function(e){return!(null!==e&&void 0!==e&&e.block)}));var r=ve(n);r.map((function(t){t.model.bind("isOn").to(e,"params",(function(e){return(null===e||void 0===e?void 0:e.block)===t.model._value}))})),(0,q.O)(this.pageBlockInputView.fieldView,r),this.pageIndexInputView=new q.xE(t,q.F_),this.pageIndexInputView.set({label:i("Page")}),this.pageIndexInputView.fieldView.set({min:1,step:1}),this.pageIndexInputView.fieldView.bind("value").to(this,"params",(function(e){return null===e||void 0===e?void 0:e.index})),this.pageIndexInputView.fieldView.on("input",(function(){e.params=(0,le.A)((0,le.A)({},e.params),{},{index:parseInt(e.pageIndexInputView.fieldView.element.value)})}));var o=new me(t,{children:[this.pageBlockInputView,this.pageIndexInputView]});return o.bind("isVisible").to(this,"type",(function(e){return"page"===e})),o}},{key:"_createBlockToggleInputs",value:function(){var e=this,t=this.locale,i=t.t,n=Object.fromEntries(Object.values(fe("Block")).map((function(e){return[e,e]})));this.toggleBlockInputView=new q.xE(t,q.By),this.toggleBlockInputView.set({label:i("Block")}),this.toggleBlockInputView.fieldView.buttonView.set({isOn:!1,withText:!0}),this.toggleBlockInputView.fieldView.buttonView.bind("label").to(this,"params",(function(e){return null===e||void 0===e?void 0:e.name})),this.toggleBlockInputView.fieldView.on("execute",(function(t){e.params=(0,le.A)((0,le.A)({},e.params),{},{name:t.source._value})})),this.toggleBlockInputView.bind("isEmpty").to(this,"params",(function(e){return!(null!==e&&void 0!==e&&e.name)}));var r=ve(n);r.map((function(t){t.model.bind("isOn").to(e,"params",(function(e){return(null===e||void 0===e?void 0:e.name)===t.model._value}))})),(0,q.O)(this.toggleBlockInputView.fieldView,r);var o=pe(i);this.toggleActionInputView=new q.xE(t,q.By),this.toggleActionInputView.set({label:i("Action")}),this.toggleActionInputView.fieldView.buttonView.set({isOn:!1,withText:!0}),this.toggleActionInputView.fieldView.buttonView.bind("label").to(this,"params",(function(e){return o[null===e||void 0===e?void 0:e.action]})),this.toggleActionInputView.fieldView.on("execute",(function(t){e.params=(0,le.A)((0,le.A)({},e.params),{},{action:t.source._value})})),this.toggleActionInputView.bind("isEmpty").to(this,"params",(function(e){return!(null!==e&&void 0!==e&&e.action)}));var a=ve(o);a.map((function(t){t.model.bind("isOn").to(e,"params",(function(e){return(null===e||void 0===e?void 0:e.action)===t.model._value}))})),(0,q.O)(this.toggleActionInputView.fieldView,a);var s=new me(t,{children:[this.toggleBlockInputView,this.toggleActionInputView]});return s.bind("isVisible").to(this,"type",(function(e){return"toggle"===e})),s}},{key:"_createScenarioInputs",value:function(){var e=this,t=this.locale,i=t.t,n=fe("Scenario");this.scenarioScenarioInputView=new q.xE(t,q.By),this.scenarioScenarioInputView.set({label:i("Scenario")}),this.scenarioScenarioInputView.fieldView.buttonView.set({isOn:!1,withText:!0}),this.scenarioScenarioInputView.fieldView.buttonView.bind("label").to(this,"params",(function(e){return n[null===e||void 0===e?void 0:e.id]})),this.scenarioScenarioInputView.fieldView.on("execute",(function(t){e.params=(0,le.A)((0,le.A)({},e.params),{},{id:t.source._value})})),this.scenarioScenarioInputView.bind("isEmpty").to(this,"params",(function(e){return!(null!==e&&void 0!==e&&e.id)}));var r=ve(n);r.map((function(t){t.model.bind("isOn").to(e,"params",(function(e){return(null===e||void 0===e?void 0:e.id)===t.model._value}))})),(0,q.O)(this.scenarioScenarioInputView.fieldView,r);var o=new me(t,{children:[this.scenarioScenarioInputView]});return o.bind("isVisible").to(this,"type",(function(e){return"scenario"===e})),o}},{key:"_createFullscreenInputs",value:function(){var e=this,t=this.locale,i=t.t,n=ge(i);this.fullscreenActionInputView=new q.xE(t,q.By),this.fullscreenActionInputView.set({label:i("Action")}),this.fullscreenActionInputView.fieldView.buttonView.set({isOn:!1,withText:!0}),this.fullscreenActionInputView.fieldView.buttonView.bind("label").to(this,"params",(function(e){return n[null===e||void 0===e?void 0:e.action]})),this.fullscreenActionInputView.fieldView.on("execute",(function(t){e.params=(0,le.A)((0,le.A)({},e.params),{},{action:t.source._value})})),this.fullscreenActionInputView.bind("isEmpty").to(this,"params",(function(e){return!(null!==e&&void 0!==e&&e.action)}));var r=ve(n);r.map((function(t){t.model.bind("isOn").to(e,"params",(function(e){return(null===e||void 0===e?void 0:e.action)===t.model._value}))})),(0,q.O)(this.fullscreenActionInputView.fieldView,r);var o=new me(t,{children:[this.fullscreenActionInputView]});return o.bind("isVisible").to(this,"type",(function(e){return"fullscreen"===e})),o}},{key:"_createTipView",value:function(){var e=this.locale,t=e.t,i=new q._(e);return i.set({icon:Ae,withText:!1,tooltip:t('TIP: Use the "behaviors" to program all the actions\nyou want when clicking on a text or an image!')}),i.extendTemplate({attributes:{class:"ck-link__tip"}}),i}},{key:"_createFormChildren",value:function(e){var i=(0,z.A)(t,"_createFormChildren",this,3)([e]);return this.typeInputView=this._createTypeInput(),this._playInputsGroup=this._createPlayInputs(),this._seekInputsGroup=this._createSeekInputs(),this._pageInputsGroup=this._createPageInputs(),this._blockToggleInputsGroup=this._createBlockToggleInputs(),this._scenarioInputsGroup=this._createScenarioInputs(),this._fullscreenInputsGroup=this._createFullscreenInputs(),this._tipView=this._createTipView(),i.addMany([this.typeInputView,this._playInputsGroup,this._seekInputsGroup,this._pageInputsGroup,this._blockToggleInputsGroup,this._scenarioInputsGroup,this._fullscreenInputsGroup],0),i.add(this._tipView),i}},{key:"updateValue",value:function(){if("url"!==this.type){var e=this.type,t=this.params,i="";switch(e){case"play":var n,r,o;if(i=`#${e}`,null!==t&&void 0!==t&&t.excerpt)i+=`=${null!==(n=t.start)&&void 0!==n?n:""}`,i+=`,${null!==(r=t.end)&&void 0!==r?r:""}`,i+=`,${null!==(o=t.scenario)&&void 0!==o?o:""}`,null!==t&&void 0!==t&&t.highlight&&(i+=",1");break;case"seek":i=`#${e}=${t.time}`;break;case"page":i=`#${e}=${t.block},${t.index}`;break;case"toggle":i=`#${t.action}Block=${t.name}`;break;case"scenario":i=`#scenario=${t.id}`;break;case"fullscreen":i=`#${t.action}Fullscreen`;break;default:i=e?`#${e}`:""}this.urlInputView.fieldView.value=i,this.fire("update")}}}])}(ue.A),Ie='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 22 22">\n  <path d="M12.069 13.455c.308.307.338.781.063 1.055l-4.555 4.553c-.271.271-.747.244-1.053-.064l-3.526-3.523c-.306-.309-.334-.781-.063-1.055L7.49 9.867c.272-.272.747-.243 1.053.063.307.306.337.781.064 1.053l-3.564 3.565c-.272.271-.245.746.063 1.053l1.29 1.291c.308.307.782.334 1.055.064l3.563-3.564c.274-.273.748-.246 1.055.063M19 6.526c.307.306.336.78.063 1.053l-4.554 4.554c-.27.271-.747.244-1.054-.063-.307-.308-.336-.782-.065-1.055l3.565-3.563c.273-.272.243-.747-.063-1.053l-1.29-1.291c-.307-.308-.78-.337-1.053-.064l-3.566 3.563c-.271.273-.746.244-1.053-.063-.307-.306-.335-.781-.064-1.052l4.555-4.555c.271-.272.747-.243 1.053.063L19 6.526z"/>\n  <path d="M14.217 7.783c.31.308.338.78.063 1.053l-5.446 5.445c-.27.271-.745.242-1.053-.064-.306-.305-.335-.781-.063-1.053l5.446-5.444c.272-.274.747-.245 1.053.063"/>\n</svg>\n',Te=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,[{key:"_createFormView",value:function(){var e=this,t=this.editor,i=t.commands.get("link"),n=t.config.get("link.defaultProtocol"),r=t.config.get("link.allowCreatingEmptyLinks"),o=new((0,q.wi)(_e))(t.locale,i);return o.urlInputView.fieldView.bind("value").to(i,"value"),o.typeInputView.bind("isEnabled").to(i,"isEnabled"),o.urlInputView.bind("isEnabled").to(i,"isEnabled"),o.saveButtonView.bind("isEnabled").to(i,"isEnabled",o.urlInputView,"isEmpty",(function(e,t){return e&&(r||!t)})),this.listenTo(o,"submit",(function(){var i=o.urlInputView.fieldView.element.value,r=(0,se.eB)(i,n);t.execute("link",r,o.getDecoratorSwitchesState()),e._closeFormView()})),this.listenTo(o,"cancel",(function(){e._closeFormView()})),o.keystrokes.set("Esc",(function(t,i){e._closeFormView(),i()})),o.on("update",(function(){e._isUIVisible&&e._balloon.updatePosition()})),o}},{key:"_createToolbarLinkButton",value:function(){var e=this,t=this.editor,i=t.commands.get("link"),n=t.t;t.ui.componentFactory.add("link",(function(t){var r=new q._(t);return r.isEnabled=!0,r.label=n("Link"),r.icon=Ie,r.keystroke=se.tO,r.tooltip=!0,r.withText=!0,r.isToggleable=!0,r.bind("isEnabled").to(i,"isEnabled"),r.bind("isOn").to(i,"value",(function(e){return!!e})),e.listenTo(r,"execute",(function(){return e._showUI(!0)})),r}))}},{key:"_addFormView",value:function(){(0,z.A)(t,"_addFormView",this,3)([]);var e=this.editor,i=e.commands.get("link");this.formView.unbind("type","params"),this.formView.bind("type","params").to(i),this.formView.updateValue(),this._balloon.visibleView===this.formView&&this.formView.focus()}}],[{key:"pluginName",get:function(){return"CustomLinkUI"}}])}(f.Fr),xe=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,null,[{key:"requires",get:function(){return[oe,Te,ae]}},{key:"pluginName",get:function(){return"CustomLink"}}])}(f.N_),Be=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,null,[{key:"requires",get:function(){return["ImageEditing","ImageUtils",oe]}},{key:"pluginName",get:function(){return"CustomLinkImageEditing"}}])}(f.CT),Ee=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,null,[{key:"requires",get:function(){return[oe,Te,"ImageBlockEditing"]}},{key:"pluginName",get:function(){return"CustomLinkImageUI"}}])}(f.EN),Se=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,null,[{key:"pluginName",get:function(){return"CustomLinkImage"}},{key:"requires",get:function(){return[Be,Ee]}}])}(f.eH),Fe=function(e){function t(){return(0,k.A)(this,t),(0,V.A)(this,t,arguments)}return(0,A.A)(t,e),(0,y.A)(t,[{key:"_isAllowedToHandleSourceEditingMode",value:function(){return!0}}])}(m.q),Ce=i(17685),Pe=i(56241),Le=function(){function e(t){(0,k.A)(this,e),this.loader=t}return(0,y.A)(e,[{key:"upload",value:function(){var e=(0,Pe.A)((0,Ce.A)().mark((function e(){var t,i,n,r;return(0,Ce.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,ne.Su)("assets_library"),i=t.uploadFiles,e.next=3,this.loader.file;case 3:return n=e.sent,e.next=6,i([n]);case 6:return r=e.sent,e.abrupt("return",{default:r[0].url});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}])}(),De=function(e){function t(e){var i;return(0,k.A)(this,t),i=(0,V.A)(this,t,[e]),e.plugins.get("FileRepository").createUploadAdapter=function(e){return new Le(e)},i}return(0,A.A)(t,e),(0,y.A)(t)}(_.k_),Oe=i(81995);function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.language,k=void 0===i?"fr":i,y=t.extraFonts,V=void 0===y?[]:y;return Oe.t.create(e,{language:k,removePlugins:[f.N_,f.sm,f.vw,f.Fr,f.eH,f.CT,m.q],plugins:[r.C1,te,o.Y0,a.yN,s.u,l.KQ,u.FG,c.DZ,h._V,h.uX,h.bs,h.yw,h.FU,h.BR,d.Tg,d._K,a.J2,xe,Se,p.B8,g.f,v.yb,Fe,w.U9,w.xM,a.Gk,a.E,a.Z3,b.XI,b.ND,a.z2,De],toolbar:{items:["undo","redo","|","bold","italic","underline","strikethrough","subscript","superscript","|","heading","blockQuote","removeFormat","|","fontFamily","fontSize","fontColor","fontBackgroundColor","|","numberedList","bulletedList","outdent","indent","|","alignment","|","uploadImage","insertTable","specialCharacters","-","link","addBehaviorTrigger","|","sourceEditing"],shouldNotGroupWhenFull:!0},heading:{options:[{model:"paragraph",title:"Paragraph"},{model:"heading1",view:"h1",title:"Heading 1"},{model:"heading2",view:"h2",title:"Heading 2"},{model:"heading3",view:"h3",title:"Heading 3"},{model:"heading4",view:"h4",title:"Heading 4"},{model:"heading5",view:"h5",title:"Heading 5"},{model:"heading6",view:"h6",title:"Heading 6"},{model:"div",view:"div",title:"Division"},{model:"pre",view:"pre",title:"Preformatted"},{model:"address",view:"address",title:"Address"}]},fontFamily:{options:["default"].concat((0,n.A)(V),["Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"]),supportAllValues:!0},fontSize:{options:["default",8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72],supportAllValues:!0},image:{toolbar:["linkImage","|","imageStyle:inline","imageStyle:block","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},htmlSupport:{allow:[{name:/^(div|a|p|i|em|b|strong|h[1-6]|span|big|small|q|cite|ins|del|var|samp|kbd|code|tt)$/,classes:!0,styles:!0,attributes:{dir:/^(rtl|ltr)$/}},{name:"a",attributes:{target:"_blank",rel:/^(noopener|nofollow)$/}}],disallow:[]},updateSourceElementOnDestroy:!0})}},39013:function(e,t){t.A='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 22 22">\n  <path d="M12.069 13.455c.308.307.338.781.063 1.055l-4.555 4.553c-.271.271-.747.244-1.053-.064l-3.526-3.523c-.306-.309-.334-.781-.063-1.055L7.49 9.867c.272-.272.747-.243 1.053.063.307.306.337.781.064 1.053l-3.564 3.565c-.272.271-.245.746.063 1.053l1.29 1.291c.308.307.782.334 1.055.064l3.563-3.564c.274-.273.748-.246 1.055.063M19 6.526c.307.306.336.78.063 1.053l-4.554 4.554c-.27.271-.747.244-1.054-.063-.307-.308-.336-.782-.065-1.055l3.565-3.563c.273-.272.243-.747-.063-1.053l-1.29-1.291c-.307-.308-.78-.337-1.053-.064l-3.566 3.563c-.271.273-.746.244-1.053-.063-.307-.306-.335-.781-.064-1.052l4.555-4.555c.271-.272.747-.243 1.053.063L19 6.526z"/>\n  <path d="M14.217 7.783c.31.308.338.78.063 1.053l-5.446 5.445c-.27.271-.745.242-1.053-.064-.306-.305-.335-.781-.063-1.053l5.446-5.444c.272-.274.747-.245 1.053.063M19.035 19.465 17.48 21.02a.824.824 0 1 1-1.207-1.125l.041-.041 1.555-1.557-1.557-1.555a.824.824 0 0 1 1.166-1.166l1.556 1.555 1.557-1.557a.825.825 0 1 1 1.166 1.168l-1.555 1.555 1.555 1.557a.824.824 0 1 1-1.166 1.166l-1.556-1.555z"/>\n</svg>\n'}}]);
//# sourceMappingURL=metaScore.Editor.umd.min.281.js.map