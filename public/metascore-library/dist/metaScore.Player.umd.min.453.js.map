{"version":3,"file":"metaScore.Player.umd.min.453.js","mappings":"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","sources":["webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/app.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/utils.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/components.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/keyboard.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/links.js","webpack://metaScore/./node_modules/@blockly/block-plus-minus/src/serialization_helper.js","webpack://metaScore/./node_modules/@blockly/block-plus-minus/src/field_minus.js","webpack://metaScore/./node_modules/@blockly/block-plus-minus/src/field_plus.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/media.js","webpack://metaScore/./packages/core/modules/app_behaviors/blockly/blocks/reactivity.js"],"sourcesContent":["import { defineBlocksWithJsonArray } from \"blockly/core\";\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"app_startup\",\n    message0: \"%{BKY_APP_STARTUP}\",\n    message1: \"%{BKY_APP_STARTUP_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_APP_STARTUP_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_STARTUP_HELPURL}\",\n  },\n  {\n    type: \"app_enter_fullscreen\",\n    message0: \"%{BKY_APP_ENTER_FULLSCREEN}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_ENTER_FULLSCREEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_ENTER_FULLSCREEN_HELPURL}\",\n  },\n  {\n    type: \"app_exit_fullscreen\",\n    message0: \"%{BKY_APP_EXIT_FULLSCREEN}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_EXIT_FULLSCREEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_EXIT_FULLSCREEN_HELPURL}\",\n  },\n  {\n    type: \"app_toggle_fullscreen\",\n    message0: \"%{BKY_APP_TOGGLE_FULLSCREEN}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_APP_TOGGLE_FULLSCREEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_APP_TOGGLE_FULLSCREEN_HELPURL}\",\n  },\n]);\n","import { watch } from \"vue\";\nimport { UnattachedFieldError } from \"blockly/core\";\n\n/**\n * Update a dropdown field's options and value depending on an options ref.\n * @param {*} field The dropdown field\n * @param {*} optionsRef The options ref\n */\nexport function watchDrowpdownFieldOptions(field, optionsRef) {\n  const block = field.getSourceBlock();\n  if (!block) throw new UnattachedFieldError();\n\n  const unwatch = watch(optionsRef, (newOptions) => {\n    // Update the field's dropdown list and value when new options are available.\n    const oldValue = field.getValue();\n    const newOptionsIncludeOldValue =\n      newOptions.find((option) => option[1] == oldValue) != undefined;\n    const newValue = newOptionsIncludeOldValue ? oldValue : newOptions[0][1];\n    field.getOptions(false);\n    field.setValue(newValue);\n  });\n\n  const origDestroy = block.destroy;\n  block.destroy = () => {\n    if (typeof origDestroy === \"function\") origDestroy();\n    unwatch();\n  };\n}\n","import { ref, watchEffect } from \"vue\";\nimport { defineBlocksWithJsonArray, Extensions, Msg, Css } from \"blockly/core\";\nimport FieldDropdown from \"../core/field_dropdown\";\nimport { useModule } from \"@metascore-library/core/services/module-manager\";\nimport { EMPTY_OPTION } from \"../constants\";\nimport { watchDrowpdownFieldOptions } from \"../utils\";\n\nconst BREADCRUMB_SEPARATOR = \" â€º \";\n\nconst SUPPORTED_PROPERTIES = [\n  \"background-color\",\n  \"border-color\",\n  \"border-width\",\n  \"hidden\",\n  \"loop-duration\",\n  \"reversed\",\n  \"cursor-width\",\n  \"cursor-color\",\n];\n\n/**\n * Get component dropdown options\n * @param {array} components The components\n * @param {boolean} recursive Whether to recurse to child components.\n * @param {number} level_ The current recursion level, used internally.\n * @param {string} breadcrumb_ The current recursion breadcrumb, used internally.\n * @returns {array} An options array\n */\nfunction getComponentOptions(\n  components = [],\n  recursive = false,\n  level_ = 0,\n  breadcrumb_ = \"\"\n) {\n  const { getComponentChildren, getComponentLabel, getComponentIconURL } =\n    useModule(\"app_components\");\n  let options = [];\n\n  if (components.length > 0) {\n    components.forEach((c) => {\n      const name = getComponentLabel(c);\n      let label = name;\n\n      const icon_url = getComponentIconURL(c);\n      if (icon_url) {\n        label = document.createElement(\"div\");\n        label.classList.add(\"blocklyMenuItemLabel\");\n        if (level_) {\n          label.style.setProperty(\"--level\", level_);\n        }\n\n        const icon = document.createElement(\"img\");\n        icon.src = icon_url;\n        icon.classList.add(\"blocklyMenuItemLabelIcon\");\n        label.appendChild(icon);\n\n        const text = document.createElement(\"div\");\n        text.classList.add(\"blocklyMenuItemLabelText\");\n        text.appendChild(document.createTextNode(name));\n        label.appendChild(text);\n\n        if (breadcrumb_) {\n          const breadcrumb = document.createElement(\"div\");\n          breadcrumb.classList.add(\"blocklyMenuItemLabelBreadcrumb\");\n          breadcrumb.appendChild(document.createTextNode(breadcrumb_));\n          label.appendChild(breadcrumb);\n        }\n\n        label.setAttribute(\n          \"title\",\n          breadcrumb_ ? `${breadcrumb_}${BREADCRUMB_SEPARATOR}${name}` : name\n        );\n      }\n\n      const option = [{ label, text: name }, `${c.type}:${c.id}`];\n\n      options.push(option);\n\n      if (recursive) {\n        const children = getComponentChildren(c);\n        if ([\"Scenario\", \"Page\"].includes(c.type)) {\n          children.reverse();\n        }\n\n        options = [\n          ...options,\n          ...getComponentOptions(\n            children,\n            true,\n            level_ + 1,\n            level_ > 0 ? `${breadcrumb_}${BREADCRUMB_SEPARATOR}${name}` : name\n          ),\n        ];\n      }\n    });\n  }\n\n  return options;\n}\n\n/**\n * Get the options array for the PROPERTY field.\n * @param {string} component_type The component type.\n * @returns {array} The options.\n */\nfunction getPropertyOptions(component_type) {\n  if (component_type === EMPTY_OPTION) {\n    return [\n      [Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION],\n      // Add all supported properties\n      // to prevent validation issues.\n      ...SUPPORTED_PROPERTIES.map((property) => {\n        return [Msg.COMPONENTS_PROPERTY[property], property];\n      }),\n    ];\n  }\n\n  const { getModelByType } = useModule(\"app_components\");\n  return Object.keys(getModelByType(component_type).properties)\n    .filter((property) => {\n      return SUPPORTED_PROPERTIES.includes(property);\n    })\n    .map((property) => {\n      return [Msg.COMPONENTS_PROPERTY[property], property];\n    });\n}\n\nconst scenarioOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  scenarioOptions.value = getComponentOptions(getComponentsByType(\"Scenario\"));\n});\nExtensions.register(\"components_scenario_options\", function () {\n  const scenario_input = this.getInput(\"COMPONENT\");\n  if (!scenario_input) return;\n\n  const scenario_field = new FieldDropdown(\n    function () {\n      const options = scenarioOptions.value;\n\n      if (options.length === 0) {\n        const block = this.getSourceBlock();\n        if (block) {\n          block.setEnabled(false);\n          block.setTooltip(Msg.COMPONENTS_NO_SCENARIO_TOOLTIP);\n        }\n        this.setEnabled(false);\n        return [[Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION]];\n      }\n\n      return options;\n    },\n    null,\n    { searchable: true }\n  );\n  scenario_input.appendField(scenario_field, \"COMPONENT\");\n\n  // Update the field's dropdown list and value when new options are available.\n  watchDrowpdownFieldOptions(scenario_field, scenarioOptions);\n});\n\nconst blockOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  blockOptions.value = getComponentOptions(getComponentsByType(\"Block\"));\n});\nExtensions.register(\"components_block_options\", function () {\n  const block_input = this.getInput(\"COMPONENT\");\n  if (!block_input) return;\n\n  const block_field = new FieldDropdown(\n    function () {\n      const options = blockOptions.value;\n\n      if (options.length === 0) {\n        const block = this.getSourceBlock();\n        if (block) {\n          block.setEnabled(false);\n          block.setTooltip(Msg.COMPONENTS_NO_BLOCK_TOOLTIP);\n        }\n        this.setEnabled(false);\n        return [[Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION]];\n      }\n\n      return options;\n    },\n    null,\n    { searchable: true }\n  );\n  block_input.appendField(block_field, \"COMPONENT\");\n\n  // Update the field's dropdown list and value when new options are available.\n  watchDrowpdownFieldOptions(block_field, blockOptions);\n});\n\nconst componentOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  componentOptions.value = getComponentOptions(\n    getComponentsByType(\"Scenario\"),\n    true\n  );\n});\nExtensions.register(\"components_component_options\", function () {\n  const component_input = this.getInput(\"COMPONENT\");\n  if (!component_input) return;\n\n  const mock = this.type.endsWith(\"_mock\");\n\n  const component_field = new FieldDropdown(\n    function () {\n      const empty_option = [\n        {\n          label: Msg.COMPONENTS_EMPTY_OPTION,\n          default: true,\n          hidden: true,\n        },\n        EMPTY_OPTION,\n      ];\n\n      if (mock) return [empty_option];\n\n      return [empty_option, ...componentOptions.value];\n    },\n    null,\n    { searchable: true }\n  );\n  component_input.appendField(component_field, \"COMPONENT\");\n\n  // Update the field's dropdown list and value when new options are available.\n  watchDrowpdownFieldOptions(component_field, componentOptions);\n\n  if (mock) {\n    component_field.setEnabled(false);\n\n    this.setEnabled(false);\n    this.setTooltip(() => {\n      return Msg.COMPONENTS_PROPERTY_MOCK_TOOLTIP.replace(\n        \"%2\",\n        Msg.COMPONENTS_PROPERTY[this.property_]\n      );\n    });\n  }\n});\n\nExtensions.register(\"components_property_options\", function () {\n  const property_input = this.getInput(\"PROPERTY\");\n  if (!property_input) return;\n\n  const mock = this.type.endsWith(\"_mock\");\n\n  const property_field = new FieldDropdown(function () {\n    const block = this.getSourceBlock();\n\n    if (!block || mock) {\n      if (block && block.property_) {\n        return [[Msg.COMPONENTS_PROPERTY[block.property_], block.property_]];\n      }\n      return [[Msg.COMPONENTS_EMPTY_OPTION, EMPTY_OPTION]];\n    }\n\n    const component_value = block.getFieldValue(\"COMPONENT\");\n    const component_type = block.getComponentType_(component_value);\n    return getPropertyOptions(component_type);\n  });\n  property_input.appendField(property_field, \"PROPERTY\");\n\n  if (mock) {\n    property_field.setEnabled(false);\n  }\n});\n\nconst PROPERTY_OPTIONS_MUTATOR_MIXIN = {\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{elseIfCount: (number|undefined), haseElse: (boolean|undefined)}}\n   *     The state of this block.\n   */\n  saveExtraState: function () {\n    const property_input = this.getInput(\"PROPERTY\");\n    if (property_input) {\n      return {\n        property: this.getFieldValue(\"PROPERTY\"),\n      };\n    }\n\n    return null;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block.\n   */\n  loadExtraState: function (state) {\n    const property_input = this.getInput(\"PROPERTY\");\n    if (property_input) {\n      this.property_ = state[\"property\"];\n    }\n  },\n\n  /**\n   * Callback called whenever the block's parent workspace changes.\n   * @param {object} evt The event.\n   */\n  onchange: function (evt) {\n    switch (evt.type) {\n      case \"create\":\n        this.updatePropertyField_();\n        break;\n\n      case \"change\":\n        if (evt.element === \"field\") {\n          if (evt.name === \"COMPONENT\") {\n            const newType = this.getComponentType_(evt.newValue);\n            const oldType = this.getComponentType_(evt.oldValue);\n\n            // Type didn't change, skip update.\n            if (newType === oldType) return;\n\n            this.updatePropertyField_();\n          } else if (evt.name === \"PROPERTY\") {\n            this.property_ = evt.newValue;\n            this.updateChecks_();\n          }\n        }\n        break;\n    }\n  },\n\n  /**\n   * Parse the component type from a COMPONENT field value.\n   * @param {string?} component_value The value to parse, the current field value is used if null.\n   * @returns {string?} The component id or null if the value counldn't be parsed.\n   */\n  getComponentType_: function (component_value) {\n    if (typeof component_value === \"undefined\") {\n      component_value = this.getFieldValue(\"COMPONENT\");\n    }\n\n    if (!component_value) return null;\n\n    const [type] = component_value.split(\":\");\n    return type;\n  },\n\n  /**\n   * Get the compatible value type or list of value types for the VALUE input.\n   * @param {string} component_type The component type.\n   * @param {string} property_name The property's name.\n   * @returns {string|array<string>|null} The type check.\n   */\n  getPropertyValueTypeCheck_: function (component_type, property_name) {\n    if (component_type === EMPTY_OPTION) return null;\n\n    const { getModelByType } = useModule(\"app_components\");\n    const property = getModelByType(component_type).properties?.[property_name];\n\n    if (property) {\n      const format = property.format;\n      switch (format) {\n        case \"color\":\n          return \"Colour\";\n      }\n\n      const type = Array.isArray(property.type)\n        ? property.type.find((t) => t !== \"null\")\n        : property.type;\n\n      switch (type) {\n        case \"boolean\":\n          return \"Boolean\";\n        case \"number\":\n        case \"integer\":\n          return \"Number\";\n        case \"string\":\n          return \"String\";\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   * Update the PROPERTY field.\n   */\n  updatePropertyField_: function () {\n    const property_field = this.getField(\"PROPERTY\");\n    if (!property_field) return;\n\n    const options = property_field.getOptions(false);\n    const match = options.find((o) => {\n      return o[1] === this.property_;\n    });\n    property_field.setValue(match ? this.property_ : options[0][1]);\n  },\n\n  /**\n   * Update the output or VALUE field's check.\n   */\n  updateChecks_() {\n    const mock = this.type.endsWith(\"_mock\");\n    if (mock) return;\n\n    const component_type = this.getComponentType_();\n    const property_value = this.getFieldValue(\"PROPERTY\");\n    const type = this.getPropertyValueTypeCheck_(\n      component_type,\n      property_value\n    );\n\n    const value_input = this.getInput(\"VALUE\");\n    if (value_input) {\n      value_input.setCheck(type);\n    } else if (this.outputConnection) {\n      this.outputConnection.setCheck(type);\n    }\n  },\n};\n\nExtensions.registerMutator(\n  \"components_property_options_mutator\",\n  PROPERTY_OPTIONS_MUTATOR_MIXIN\n);\n\ndefineBlocksWithJsonArray([\n  // Click.\n  {\n    type: \"components_click\",\n    message0: \"%{BKY_COMPONENTS_CLICK}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n    ],\n    message1: \"%{BKY_COMPONENTS_CLICK_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    extensions: [\"components_component_options\"],\n    inputsInline: true,\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_CLICK_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_CLICK_HELPURL}\",\n  },\n  // Set scenario.\n  {\n    type: \"components_set_scenario\",\n    message0: \"%{BKY_COMPONENTS_SET_SCENARIO}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n    ],\n    extensions: [\"components_scenario_options\"],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_SCENARIO_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_SCENARIO_HELPURL}\",\n  },\n  // Get property.\n  {\n    type: \"components_get_property\",\n    message0: \"%{BKY_COMPONENTS_GET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    output: null,\n    style: \"component_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_GET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_GET_PROPERTY_HELPURL}\",\n  },\n  // Get property mock.\n  {\n    type: \"components_get_property_mock\",\n    message0: \"%{BKY_COMPONENTS_GET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    output: null,\n    style: \"component_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_GET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_GET_PROPERTY_HELPURL}\",\n  },\n  // Set property.\n  {\n    type: \"components_set_property\",\n    message0: \"%{BKY_COMPONENTS_SET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n      {\n        type: \"input_value\",\n        name: \"VALUE\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_PROPERTY_HELPURL}\",\n  },\n  // Set property mock.\n  {\n    type: \"components_set_property_mock\",\n    message0: \"%{BKY_COMPONENTS_SET_PROPERTY}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"PROPERTY\",\n      },\n      {\n        type: \"input_value\",\n        name: \"VALUE\",\n      },\n    ],\n    extensions: [\"components_component_options\", \"components_property_options\"],\n    mutator: \"components_property_options_mutator\",\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_PROPERTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_PROPERTY_HELPURL}\",\n  },\n  // Get block's activate page index.\n  {\n    type: \"components_get_block_page\",\n    message0: \"%{BKY_COMPONENTS_GET_BLOCK_PAGE}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n    ],\n    extensions: [\"components_block_options\"],\n    output: \"Number\",\n    style: \"component_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_GET_BLOCK_PAGE_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_GET_BLOCK_PAGE_HELPURL}\",\n  },\n  // Set block's activate page index.\n  {\n    type: \"components_set_block_page\",\n    message0: \"%{BKY_COMPONENTS_SET_BLOCK_PAGE}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"COMPONENT\",\n      },\n      {\n        type: \"input_value\",\n        name: \"INDEX\",\n        check: \"Number\",\n      },\n    ],\n    extensions: [\"components_block_options\"],\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_COMPONENTS_SET_BLOCK_PAGE_TOOLTIP}\",\n    helpUrl: \"%{BKY_COMPONENTS_SET_BLOCK_PAGE_HELPURL}\",\n  },\n]);\n\nCss.register(\n  `\n  .blocklyDropDownDiv .blocklyMenuItemLabel {\n    display: grid;\n    grid-template-columns: auto 1fr;\n    grid-template-rows: auto auto;\n    grid-template-areas:\n      \"icon label\"\n      \"breadcrumb breadcrumb\";\n    align-items: center;\n    padding-left: calc(var(--level, 0) * 0.5em);\n    gap: 0 0.5em;\n  }\n  .blocklyDropDownDiv .blocklyMenuItemLabelIcon {\n    grid-area: icon;\n    width: 1.5em;\n  }\n  .blocklyDropDownDiv .blocklyMenuItemLabelText {\n    grid-area: label;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .blocklyDropDownDiv .blocklyMenuItemLabelBreadcrumb {\n    display: none;\n    grid-area: breadcrumb;\n    font-size: 0.75em;\n    opacity: 0.5;\n    min-width: 0;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .blocklyDropDownDiv .blocklySearchableMenuSearching .blocklyMenuItemLabel {\n    padding-left: 0;\n  }\n  .blocklyDropDownDiv .blocklySearchableMenuSearching .blocklyMenuItemLabelBreadcrumb {\n    display: block;\n  }\n  `\n);\n","import { defineBlocksWithJsonArray } from \"blockly/core\";\n\nconst keys = [\n  [\"%{BKY_KEYBOARD_KEYPRESSED_ANY}\", \"any\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_SPACE}\", \" \"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_UP}\", \"ArrowUp\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_DOWN}\", \"ArrowDown\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_RIGHT}\", \"ArrowRight\"],\n  [\"%{BKY_KEYBOARD_KEYPRESSED_LEFT}\", \"ArrowLeft\"],\n  [\"a\", \"a\"],\n  [\"b\", \"b\"],\n  [\"c\", \"c\"],\n  [\"d\", \"d\"],\n  [\"e\", \"e\"],\n  [\"f\", \"f\"],\n  [\"g\", \"g\"],\n  [\"h\", \"h\"],\n  [\"i\", \"i\"],\n  [\"j\", \"j\"],\n  [\"k\", \"k\"],\n  [\"l\", \"l\"],\n  [\"m\", \"m\"],\n  [\"n\", \"n\"],\n  [\"o\", \"o\"],\n  [\"p\", \"p\"],\n  [\"q\", \"q\"],\n  [\"r\", \"r\"],\n  [\"s\", \"s\"],\n  [\"t\", \"t\"],\n  [\"u\", \"u\"],\n  [\"v\", \"v\"],\n  [\"w\", \"w\"],\n  [\"x\", \"x\"],\n  [\"y\", \"y\"],\n  [\"z\", \"z\"],\n  [\"0\", \"0\"],\n  [\"1\", \"1\"],\n  [\"2\", \"2\"],\n  [\"3\", \"3\"],\n  [\"4\", \"4\"],\n  [\"5\", \"5\"],\n  [\"6\", \"6\"],\n  [\"7\", \"7\"],\n  [\"8\", \"8\"],\n  [\"9\", \"9\"],\n];\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"keyboard_keypressed\",\n    message0: \"%{BKY_KEYBOARD_KEYPRESSED}\",\n    args0: [\n      {\n        type: \"field_dropdown\",\n        name: \"KEY\",\n        options: keys,\n      },\n    ],\n    message1: \"%{BKY_KEYBOARD_KEYPRESSED_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_KEYBOARD_KEYPRESSED_TOOLTIP}\",\n    helpUrl: \"%{BKY_KEYBOARD_KEYPRESSED_HELPURL}\",\n  },\n]);\n","import { ref, watchEffect } from \"vue\";\nimport { defineBlocksWithJsonArray, Extensions, Msg } from \"blockly/core\";\nimport { useModule } from \"@metascore-library/core/services/module-manager\";\nimport { EMPTY_OPTION } from \"../constants\";\nimport { watchDrowpdownFieldOptions } from \"../utils\";\n\nconst triggerOptions = ref([]);\nwatchEffect(() => {\n  const { getComponentsByType } = useModule(\"app_components\");\n  const components = getComponentsByType(\"Content\");\n  const parser = new DOMParser();\n  const ids = new Set();\n\n  components.forEach((component) => {\n    const text = component.text;\n\n    if (text && text.includes(\"data-behavior-trigger\")) {\n      const doc = parser.parseFromString(text, \"text/html\");\n      doc.querySelectorAll(\"a[data-behavior-trigger]\").forEach((el) => {\n        const id = el.dataset.behaviorTrigger;\n        ids.add(id);\n      });\n    }\n  });\n\n  if (ids.size === 0) {\n    triggerOptions.value = [[Msg.LINKS_EMPTY_OPTION, EMPTY_OPTION]];\n  } else {\n    triggerOptions.value = Array.from(ids)\n      .sort()\n      .map((id) => [id, id]);\n  }\n});\n\nExtensions.register(\"behavior_triggers_options\", function () {\n  const block = this;\n  const field = block.getField(\"TRIGGER\");\n  const options = field.getOptions();\n\n  if (options.length === 1 && options[0][1] === EMPTY_OPTION) {\n    field.setEnabled(false);\n    block.setEnabled(false);\n    block.setTooltip(Msg.LINKS_CLICK_EMPTY_TOOLTIP);\n  } else {\n    field.setEnabled(true);\n    block.setEnabled(true);\n    block.setTooltip(Msg.LINKS_CLICK_TOOLTIP);\n  }\n\n  // Update the field's dropdown list and value when new options are available.\n  watchDrowpdownFieldOptions(field, triggerOptions);\n});\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"links_click\",\n    message0: \"%{BKY_LINKS_CLICK}\",\n    args0: [\n      {\n        type: \"field_dropdown\",\n        name: \"TRIGGER\",\n        options: () => triggerOptions.value,\n      },\n    ],\n    message1: \"%{BKY_LINKS_CLICK_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    extensions: [\"behavior_triggers_options\"],\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_LINKS_CLICK_TOOLTIP}\",\n    helpUrl: \"%{BKY_LINKS_CLICK_HELPURL}\",\n  },\n  {\n    type: \"links_open_url\",\n    message0: \"%{BKY_LINKS_OPEN_URL}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"URL\",\n        check: \"String\",\n      },\n    ],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    helpUrl: \"%{BKY_LINKS_OPEN_URL_HELPURL}\",\n  },\n]);\n","/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Returns the extra state of the given block (either as XML or a JSO, depending\n * on the block's definition).\n * @param {!Blockly.BlockSvg} block The block to get the extra state of.\n * @returns {string} A stringified version of the extra state of the given\n *     block.\n */\nexport function getExtraBlockState(block) {\n  // TODO: This is a dupe of the BlockChange.getExtraBlockState code, do we\n  //    want to make that public?\n  if (block.saveExtraState) {\n    const state = block.saveExtraState();\n    return state ? JSON.stringify(state) : '';\n  } else if (block.mutationToDom) {\n    const state = block.mutationToDom();\n    return state ? Blockly.Xml.domToText(state) : '';\n  }\n  return '';\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A function that creates a minus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\nimport {getExtraBlockState} from './serialization_helper';\n\n/**\n * Creates a minus image field used for mutation.\n * @param {Object=} args Untyped args passed to block.minus when the field\n *     is clicked.\n * @returns {Blockly.FieldImage} The minus field.\n */\nexport function createMinusField(args = undefined) {\n  const minus = new Blockly.FieldImage(minusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.minus when the field is clicked.\n   * @type {?(Object|undefined)}\n   * @private\n   */\n  minus.args_ = args;\n  return minus;\n}\n\n/**\n * Calls block.minus(args) when the minus field is clicked.\n * @param {Blockly.FieldImage} minusField The field being clicked.\n * @private\n */\nfunction onClick_(minusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = minusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n  const oldExtraState = getExtraBlockState(block);\n  block.minus(minusField.args_);\n  const newExtraState = getExtraBlockState(block);\n\n  if (oldExtraState != newExtraState) {\n    Blockly.Events.fire(\n      new Blockly.Events.BlockChange(\n        block,\n        'mutation',\n        null,\n        oldExtraState,\n        newExtraState,\n      ),\n    );\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst minusImage =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw' +\n  'MC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPS' +\n  'JNMTggMTFoLTEyYy0xLjEwNCAwLTIgLjg5Ni0yIDJzLjg5NiAyIDIgMmgxMmMxLjEwNCAw' +\n  'IDItLjg5NiAyLTJzLS44OTYtMi0yLTJ6IiBmaWxsPSJ3aGl0ZSIgLz48L3N2Zz4K';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A field for a plus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\nimport {getExtraBlockState} from './serialization_helper';\n\n/**\n * Creates a plus image field used for mutation.\n * @param {Object=} args Untyped args passed to block.minus when the field\n *     is clicked.\n * @returns {Blockly.FieldImage} The Plus field.\n */\nexport function createPlusField(args = undefined) {\n  const plus = new Blockly.FieldImage(plusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.plus when the field is clicked.\n   * @type {?(Object|undefined)}\n   * @private\n   */\n  plus.args_ = args;\n  return plus;\n}\n\n/**\n * Calls block.plus(args) when the plus field is clicked.\n * @param {!Blockly.FieldImage} plusField The field being clicked.\n * @private\n */\nfunction onClick_(plusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = plusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n  const oldExtraState = getExtraBlockState(block);\n  block.plus(plusField.args_);\n  const newExtraState = getExtraBlockState(block);\n\n  if (oldExtraState != newExtraState) {\n    Blockly.Events.fire(\n      new Blockly.Events.BlockChange(\n        block,\n        'mutation',\n        null,\n        oldExtraState,\n        newExtraState,\n      ),\n    );\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst plusImage =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n  '9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMT' +\n  'ggMTBoLTR2LTRjMC0xLjEwNC0uODk2LTItMi0ycy0yIC44OTYtMiAybC4wNzEgNGgtNC4wNz' +\n  'FjLTEuMTA0IDAtMiAuODk2LTIgMnMuODk2IDIgMiAybDQuMDcxLS4wNzEtLjA3MSA0LjA3MW' +\n  'MwIDEuMTA0Ljg5NiAyIDIgMnMyLS44OTYgMi0ydi00LjA3MWw0IC4wNzFjMS4xMDQgMCAyLS' +\n  '44OTYgMi0ycy0uODk2LTItMi0yeiIgZmlsbD0id2hpdGUiIC8+PC9zdmc+Cg==';\n","import {\n  defineBlocksWithJsonArray,\n  Extensions,\n  Msg,\n  FieldCheckbox,\n  FieldLabel,\n} from \"blockly/core\";\nimport { createMinusField } from \"@blockly/block-plus-minus/src/field_minus\";\nimport { createPlusField } from \"@blockly/block-plus-minus/src/field_plus\";\n\ndefineBlocksWithJsonArray([\n  // Block for timecode value\n  {\n    type: \"media_timecode\",\n    message0: \"%1\",\n    args0: [\n      {\n        type: \"field_timecode\",\n        name: \"TIMECODE\",\n      },\n    ],\n    output: \"Number\",\n    style: \"media_blocks\",\n    helpUrl: \"%{BKY_MEDIA_TIMECODE_HELPURL}\",\n    tooltip: \"%{BKY_MEDIA_TIMECODE_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"],\n  },\n  {\n    type: \"media_get_duration\",\n    message0: \"%{BKY_MEDIA_GET_DURATION}\",\n    output: \"Number\",\n    style: \"media_blocks\",\n    tooltip: \"%{BKY_MEDIA_GET_DURATION_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_GET_DURATION_HELPURL}\",\n  },\n  {\n    type: \"media_get_time\",\n    message0: \"%{BKY_MEDIA_GET_TIME}\",\n    output: \"Number\",\n    style: \"media_blocks\",\n    tooltip: \"%{BKY_MEDIA_GET_TIME_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_GET_TIME_HELPURL}\",\n  },\n  {\n    type: \"media_set_time\",\n    message0: \"%{BKY_MEDIA_SET_TIME}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: \"Number\",\n      },\n    ],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_SET_TIME_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_SET_TIME_HELPURL}\",\n  },\n  {\n    type: \"media_playing\",\n    message0: \"%{BKY_MEDIA_PLAYING}\",\n    output: \"Boolean\",\n    style: \"media_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAYING_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAYING_HELPURL}\",\n  },\n  {\n    type: \"media_play\",\n    message0: \"%{BKY_MEDIA_PLAY}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAY_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAY_HELPURL}\",\n  },\n  {\n    type: \"media_play_excerpt\",\n    message0: \"%{BKY_MEDIA_PLAY_EXCERPT}\",\n    args0: [\n      {\n        type: \"input_dummy\",\n        name: \"PLUS_MINUS\",\n      },\n      {\n        type: \"input_value\",\n        name: \"FROM\",\n        check: \"Number\",\n      },\n      {\n        type: \"input_value\",\n        name: \"TO\",\n        check: \"Number\",\n      },\n      {\n        type: \"input_dummy\",\n        name: \"LINK_HIGHLIGHT\",\n      },\n    ],\n    inputsInline: true,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    mutator: \"media_play_excerpt_mutator\",\n    tooltip: \"%{BKY_MEDIA_PLAY_EXCERPT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAY_EXCERPT_HELPURL}\",\n  },\n  // Block representing the top block in the media_play_excerpt mutator.\n  {\n    type: \"media_play_excerpt_top\",\n    message0: \"%{BKY_MEDIA_PLAY_EXCERPT}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"FROM\",\n        check: \"Number\",\n      },\n      {\n        type: \"input_value\",\n        name: \"TO\",\n        check: \"Number\",\n      },\n    ],\n    inputsInline: true,\n    nextStatement: null,\n    enableContextMenu: false,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAY_EXCERPT_TOP_TOOLTIP}\",\n  },\n  // Block representing the then statement in the media_play_excerpt mutator.\n  {\n    type: \"media_play_excerpt_then\",\n    message0: \"%{BKY_MEDIA_PLAY_EXCERPT_THEN}\",\n    previousStatement: null,\n    enableContextMenu: false,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PLAY_EXCERPT_THEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PLAY_EXCERPT_THEN_HELPURL}\",\n  },\n  {\n    type: \"media_pause\",\n    message0: \"%{BKY_MEDIA_PAUSE}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_PAUSE_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_PAUSE_HELPURL}\",\n  },\n  {\n    type: \"media_stop\",\n    message0: \"%{BKY_MEDIA_STOP}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"actions_blocks\",\n    tooltip: \"%{BKY_MEDIA_STOP_TOOLTIP}\",\n    helpUrl: \"%{BKY_MEDIA_STOP_HELPURL}\",\n  },\n]);\n\n/**\n * Mutator methods added to media_play_excerpt block.\n * @mixin\n * @augments Block\n * @readonly\n */\nconst MEDIA_PLAY_EXCERPT_MUTATOR_MIXIN = {\n  hasThen_: false,\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * @return {?{hasThen: (boolean|undefined)}}\n   *     The state of this block.\n   */\n  saveExtraState: function () {\n    if (!this.hasLinkHighlight_ && !this.hasThen_) {\n      return null;\n    }\n\n    const data = {};\n    if (this.hasLinkHighlight_) {\n      data.hasLinkHighlight = true;\n    }\n    if (this.hasThen_) {\n      data.hasThen = true;\n    }\n    return data;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * @param {*} state The state to apply to this block.\n   */\n  loadExtraState: function (state) {\n    this.hasLinkHighlight_ = state[\"hasLinkHighlight\"] || false;\n    this.hasThen_ = state[\"hasThen\"] || false;\n    this.updateShape_();\n  },\n\n  /**\n   * Callback for the plus field.\n   */\n  plus: function () {\n    this.hasThen_ = true;\n    this.updateShape_();\n  },\n\n  /**\n   * Callback for the minus field.\n   * @this {Blockly.Block}\n   */\n  minus: function () {\n    this.hasThen_ = false;\n    this.updateShape_();\n  },\n\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @this {Block}\n   * @private\n   */\n  updateShape_: function () {\n    const input = this.getInput(\"LINK_HIGHLIGHT\");\n\n    if (this.hasLinkHighlight_) {\n      if (!this.getField(\"HIGHLIGHT_LINK\")) {\n        const checkbox = new FieldCheckbox();\n        checkbox.setTooltip(Msg[\"MEDIA_PLAY_EXCERPT_HIGHLIGHT_LINK_TOOLTIP\"]);\n\n        const label = new FieldLabel(Msg[\"MEDIA_PLAY_EXCERPT_HIGHLIGHT_LINK\"]);\n        label.setTooltip(Msg[\"MEDIA_PLAY_EXCERPT_HIGHLIGHT_LINK_TOOLTIP\"]);\n\n        input\n          .appendField(checkbox, \"HIGHLIGHT_LINK\")\n          .appendField(label, \"HIGHLIGHT_LINK_LABEL\");\n      }\n    } else {\n      input.fieldRow\n        .map((field) => field.name)\n        .forEach((name) => {\n          input.removeField(name);\n        });\n    }\n\n    if (this.hasThen_) {\n      // Update plus/minus buttons.\n      if (this.getField(\"PLUS\")) {\n        this.getInput(\"PLUS_MINUS\").removeField(\"PLUS\");\n      }\n      if (!this.getField(\"MINUS\")) {\n        this.getInput(\"PLUS_MINUS\").appendField(createMinusField(), \"MINUS\");\n      }\n      // Add \"then\" input.\n      if (!this.getInput(\"THEN\")) {\n        this.appendStatementInput(\"THEN\").appendField(\n          Msg[\"MEDIA_PLAY_EXCERPT_THEN\"]\n        );\n      }\n    } else {\n      // Update plus/minus buttons.\n      if (!this.getField(\"PLUS\")) {\n        this.getInput(\"PLUS_MINUS\").appendField(createPlusField(), \"PLUS\");\n      }\n      if (this.getField(\"MINUS\")) {\n        this.getInput(\"PLUS_MINUS\").removeField(\"MINUS\");\n      }\n      // Remove \"then\" input.\n      if (this.getInput(\"THEN\")) {\n        this.removeInput(\"THEN\");\n      }\n    }\n  },\n};\n\n/**\n * Adds the initial plus button.\n * @this {Blockly.Block}\n */\nconst MEDIA_PLAY_EXCERPT_MUTATOR_HELPER = function () {\n  this.setOnChange(function (evt) {\n    if (evt.isUiEvent) return;\n\n    const parent_block = this.getSurroundParent();\n    const hasLinkHighlight =\n      parent_block && parent_block.type === \"links_click\";\n\n    if (this.hasLinkHighlight_ !== hasLinkHighlight) {\n      this.hasLinkHighlight_ = !!hasLinkHighlight;\n      this.updateShape_();\n    }\n  });\n\n  this.updateShape_();\n};\n\nExtensions.registerMutator(\n  \"media_play_excerpt_mutator\",\n  MEDIA_PLAY_EXCERPT_MUTATOR_MIXIN,\n  MEDIA_PLAY_EXCERPT_MUTATOR_HELPER,\n  [\"media_play_excerpt_then\"]\n);\n","import { defineBlocksWithJsonArray } from \"blockly/core\";\n\ndefineBlocksWithJsonArray([\n  {\n    type: \"reactivity_when\",\n    message0: \"%{BKY_REACTIVITY_WHEN}\",\n    args0: [\n      {\n        type: \"input_value\",\n        name: \"CONDITION\",\n        check: \"Boolean\",\n      },\n    ],\n    message1: \"%{BKY_REACTIVITY_WHEN_THEN}\",\n    args1: [\n      {\n        type: \"input_statement\",\n        name: \"STATEMENT\",\n      },\n    ],\n    inputsInline: true,\n    style: \"trigger_blocks\",\n    tooltip: \"%{BKY_REACTIVITY_WHEN_TOOLTIP}\",\n    helpUrl: \"%{BKY_REACTIVITY_WHEN_HELPURL}\",\n  },\n]);\n"],"names":["defineBlocksWithJsonArray","type","message0","message1","args1","name","style","tooltip","helpUrl","previousStatement","nextStatement","watchDrowpdownFieldOptions","field","optionsRef","block","getSourceBlock","UnattachedFieldError","unwatch","watch","newOptions","oldValue","getValue","newOptionsIncludeOldValue","undefined","find","option","newValue","getOptions","setValue","origDestroy","destroy","BREADCRUMB_SEPARATOR","SUPPORTED_PROPERTIES","getComponentOptions","components","arguments","length","recursive","level_","breadcrumb_","_useModule","useModule","getComponentChildren","getComponentLabel","getComponentIconURL","options","forEach","c","label","icon_url","document","createElement","classList","add","setProperty","icon","src","appendChild","text","createTextNode","breadcrumb","setAttribute","id","push","children","includes","reverse","concat","_toConsumableArray","getPropertyOptions","component_type","EMPTY_OPTION","Msg","COMPONENTS_EMPTY_OPTION","map","property","COMPONENTS_PROPERTY","_useModule2","getModelByType","Object","keys","properties","filter","scenarioOptions","ref","watchEffect","_useModule3","getComponentsByType","value","Extensions","register","scenario_input","this","getInput","scenario_field","FieldDropdown","setEnabled","setTooltip","COMPONENTS_NO_SCENARIO_TOOLTIP","searchable","appendField","blockOptions","_useModule4","block_input","block_field","COMPONENTS_NO_BLOCK_TOOLTIP","componentOptions","_useModule5","_this","component_input","mock","endsWith","component_field","empty_option","default","hidden","COMPONENTS_PROPERTY_MOCK_TOOLTIP","replace","property_","property_input","property_field","component_value","getFieldValue","getComponentType_","PROPERTY_OPTIONS_MUTATOR_MIXIN","saveExtraState","loadExtraState","state","onchange","evt","updatePropertyField_","element","newType","oldType","updateChecks_","_component_value$spli","split","_component_value$spli2","_slicedToArray","getPropertyValueTypeCheck_","property_name","_getModelByType$prope","_useModule6","format","Array","isArray","t","_this2","getField","match","o","property_value","value_input","setCheck","outputConnection","registerMutator","args0","extensions","inputsInline","mutator","output","check","Css","triggerOptions","parser","DOMParser","ids","Set","component","doc","parseFromString","querySelectorAll","el","dataset","behaviorTrigger","size","LINKS_EMPTY_OPTION","from","sort","LINKS_CLICK_EMPTY_TOOLTIP","LINKS_CLICK_TOOLTIP","getExtraBlockState","JSON","stringify","mutationToDom","Blockly","domToText","createMinusField","args","minus","minusImage","onClick_","args_","minusField","isInFlyout","setGroup","oldExtraState","newExtraState","fire","BlockChange","createPlusField","plus","plusImage","plusField","enableContextMenu","MEDIA_PLAY_EXCERPT_MUTATOR_MIXIN","hasThen_","hasLinkHighlight_","data","hasLinkHighlight","hasThen","updateShape_","input","checkbox","FieldCheckbox","FieldLabel","fieldRow","removeField","appendStatementInput","removeInput","MEDIA_PLAY_EXCERPT_MUTATOR_HELPER","setOnChange","isUiEvent","parent_block","getSurroundParent"],"sourceRoot":""}